const originalWrite=process['stdout']['write'];process['stdout']['write']=function(_0x283b49,_0x4467b5,_0x267187){const _0x3cc63e=_0x283b49['toString']();if((_0x3cc63e['includes']('SessionEntry')||_0x3cc63e['includes']('Closing\x20session')||_0x3cc63e['includes']('Bad\x20MAC')||_0x3cc63e['includes']('Decrypted\x20message')||_0x3cc63e['includes']('MessageCounterError'))&&!_0x3cc63e['includes']('ðŸš€'))return;return originalWrite['call'](process['stdout'],_0x283b49,_0x4467b5,_0x267187);},require('dotenv')['config']();const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,makeCacheableSignalKeyStore,Browsers,jidNormalizedUser}=require('@whiskeysockets/baileys'),fs=require('fs-extra'),path=require('path'),pino=require('pino'),zlib=require('zlib'),{MongoClient}=require('mongodb'),NodeCache=require('node-cache'),silentLogger=pino({'level':'silent'}),commands=new Map(),settingsFile='./settings.json',msgRetryCounterCache=new NodeCache(),statusCache=new Set();if(!global['healingRetries'])global['healingRetries']=new Map();if(!global['lockedContacts'])global['lockedContacts']=new Set();if(!global['groupNames'])global['groupNames']=new Map();if(!global['gamestate'])global['gamestate']=new Map();const taskQueue=[];let isProcessing=![],connectionOpenTime=0x0;async function processQueue(){if(isProcessing||taskQueue['length']===0x0)return;isProcessing=!![];const _0x13057d=taskQueue['shift']();try{await _0x13057d();const _0x42d192=Math['floor'](Math['random']()*(0xbb8-0x5dc+0x1))+0x5dc;await new Promise(_0xbb48c7=>setTimeout(_0xbb48c7,_0x42d192));}catch(_0x41ab93){}isProcessing=![],processQueue();}async function healSession(_0x247b59){if(!_0x247b59||_0x247b59['includes']('newsletter'))return;taskQueue['push'](async()=>{try{const _0x46f48b=Math['floor'](Math['random']()*(0x1b58-0xfa0+0x1))+0xfa0;await global['conn']['sendPresenceUpdate']('composing',_0x247b59),await new Promise(_0x1f72ca=>setTimeout(_0x1f72ca,_0x46f48b)),await global['conn']['sendPresenceUpdate']('paused',_0x247b59),_0x247b59['endsWith']('@g.us')?(await global['conn']['groupMetadata'](_0x247b59)['catch'](()=>{}),console['log']('ðŸš€\x20[QUEEN]\x20ðŸ›ï¸\x20Group\x20Keys\x20Synced:\x20'+_0x247b59['split']('@')[0x0])):console['log']('ðŸš€\x20[QUEEN]\x20ðŸ©¹\x20Repaired\x20session\x20for:\x20'+_0x247b59['split']('@')[0x0]);}catch(_0x448ab9){}}),processQueue();}async function getTargetName(_0x114c13,_0x34125f){if(global['groupNames']['has'](_0x34125f))return global['groupNames']['get'](_0x34125f);if(_0x34125f['endsWith']('@g.us'))try{const _0x3089e8=await _0x114c13['groupMetadata'](_0x34125f);return global['groupNames']['set'](_0x34125f,_0x3089e8['subject']),_0x3089e8['subject'];}catch{return'Unknown\x20Group';}return _0x34125f['split']('@')[0x0];}const mongoUri=process.env.MONGO_URI,client=new MongoClient(mongoUri||'');global['saveSettings']=async()=>{try{const _0x2badde=fs['readJsonSync'](settingsFile);await client['db']('vinnieBot')['collection']('config')['updateOne']({'id':'main_config'},{'$set':_0x2badde},{'upsert':!![]});}catch(_0x16a648){console['error']('âŒ\x20Cloud\x20Sync\x20Failed:',_0x16a648);}};async function loadCloudSettings(){try{await client['connect']();const _0x32717a=await client['db']('vinnieBot')['collection']('config')['findOne']({'id':'main_config'});_0x32717a&&(delete _0x32717a['_id'],delete _0x32717a['id'],fs['writeJsonSync'](settingsFile,_0x32717a),console['log']('âœ…\x20Settings\x20Synced\x20from\x20Cloud'));}catch(_0x788093){console['log']('âš ï¸\x20Using\x20Local\x20Settings\x20(Cloud\x20Offline)');}}!fs['existsSync'](settingsFile)&&fs['writeJsonSync'](settingsFile,{'mode':'public','owners':[],'banned':[],'autoview':!![],'antilink':!![],'autoreact':!![],'typing':!![],'recording':![],'antiviewonce':!![],'antimention':![],'antidelete':!![]});const workerPath=path['join'](__dirname,'workers');if(!fs['existsSync'](workerPath))fs['mkdirSync'](workerPath);const workerFiles=fs['readdirSync'](workerPath)['filter'](_0x41d57d=>_0x41d57d['endsWith']('.js')),loadedWorkers=workerFiles['map'](_0x3d21c0=>{return{'name':_0x3d21c0,'fn':require(path['join'](workerPath,_0x3d21c0))};}),loadCommands=()=>{try{const _0xdede5b=fs['readdirSync'](path['join'](__dirname,'commands'));for(const _0x105e94 of _0xdede5b){const _0x14ef44=fs['readdirSync'](path['join'](__dirname,'commands',_0x105e94))['filter'](_0x2b5e73=>_0x2b5e73['endsWith']('.js'));for(const _0x441f15 of _0x14ef44){const _0x3fd1a2=require('./commands/'+_0x105e94+'/'+_0x441f15);commands['set'](_0x3fd1a2['name'],_0x3fd1a2);}}console['log']('âœ…\x20Loaded\x20'+commands['size']+'\x20Commands');}catch(_0xd1d9d0){}};async function startVinnieHub(){await loadCloudSettings(),loadCommands();const _0x18d2f9='./auth_temp';if(!fs['existsSync'](_0x18d2f9))fs['mkdirSync'](_0x18d2f9);const _0x2bed2d=path['join'](_0x18d2f9,'creds.json');if(!fs['existsSync'](_0x2bed2d)){const _0x433a9e=process.env.SESSION_ID;if(_0x433a9e&&_0x433a9e['startsWith']('VINNIE~'))try{const _0x42d77b=client['db']('vinnieBot'),_0x1ba6b1=_0x42d77b['collection']('sessions'),_0x5c8643=await _0x1ba6b1['findOne']({'sessionId':_0x433a9e});if(_0x5c8643){const _0x1c9a41=zlib['inflateSync'](Buffer['from'](_0x5c8643['data'],'base64'))['toString']();fs['writeFileSync'](_0x2bed2d,_0x1c9a41);}}catch(_0xe92be4){}}const {state:_0x1194ba,saveCreds:_0x125c59}=await useMultiFileAuthState(_0x18d2f9),_0x43f7db=makeWASocket({'auth':{'creds':_0x1194ba['creds'],'keys':makeCacheableSignalKeyStore(_0x1194ba['keys'],silentLogger)},'printQRInTerminal':![],'logger':silentLogger,'browser':Browsers['macOS']('Safari'),'shouldSyncHistoryMessage':()=>![],'syncFullHistory':![],'markOnlineOnConnect':!![],'fireInitQueries':![],'maxMsgRetryCount':0x5,'msgRetryCounterCache':msgRetryCounterCache,'generateHighQualityLinkPreview':![],'keepAliveIntervalMs':0x7530,'getMessage':async _0x2f3483=>{return undefined;}});global['conn']=_0x43f7db,_0x43f7db['ev']['on']('creds.update',async()=>{await _0x125c59();try{const _0x29d4ef=process.env.SESSION_ID,_0x1c04b0=fs['readFileSync'](_0x2bed2d),_0x45466f=zlib['deflateSync'](_0x1c04b0)['toString']('base64');await client['db']('vinnieBot')['collection']('sessions')['updateOne']({'sessionId':_0x29d4ef},{'$set':{'data':_0x45466f,'updatedAt':new Date()}},{'upsert':!![]});}catch(_0x15778f){}}),_0x43f7db['ev']['on']('messages.upsert',async({messages:_0x194461,type:_0x48a0cd})=>{if(_0x48a0cd!=='notify')return;let _0x549f8d=_0x194461[0x0];const _0x3cacae=_0x549f8d['key']['remoteJid'];if(_0x3cacae==='status@broadcast'){const _0x3afdb9=_0x549f8d['key']['id'];if(statusCache['has'](_0x3afdb9))return;const _0x5ef874=Date['now']()-connectionOpenTime<0x3a98;if(_0x5ef874)return;statusCache['add'](_0x3afdb9),console['log']('ðŸ‘ï¸\x20[V_HUB]\x20Viewing\x20Status\x20from:\x20'+(_0x549f8d['pushName']||_0x3cacae['split']('@')[0x0]));if(statusCache['size']>0x1f4)statusCache['clear']();}if(_0x3cacae['endsWith']('@newsletter'))return;if(global['lockedContacts']['has'](_0x3cacae))return;const _0x2b24a5=Object['keys'](_0x549f8d['message']||{})[0x0];if(_0x2b24a5==='protocolMessage'&&_0x549f8d['message']['protocolMessage']?.['type']===0x0){const _0xbe6ec5=_0x549f8d['key']['participant']||_0x549f8d['key']['remoteJid'];healSession(_0xbe6ec5);}let _0x487392=0x0;while(!_0x549f8d['message']&&_0x487392<0x3&&!_0x549f8d['key']['fromMe']){await new Promise(_0xb2352e=>setTimeout(_0xb2352e,0x3e8)),_0x487392++;}if(!_0x549f8d['message'])return;const _0x982d3d=_0x549f8d['key']['fromMe'],_0x187e0c=process.env.PREFIX||'.',_0x9daf2c=fs['readJsonSync'](settingsFile),_0xfd7044=Object['keys'](_0x549f8d['message'])[0x0],_0x55354f=(_0xfd7044==='conversation'?_0x549f8d['message']['conversation']:_0xfd7044==='extendedTextMessage'?_0x549f8d['message']['extendedTextMessage']['text']:_0xfd7044==='imageMessage'?_0x549f8d['message']['imageMessage']['caption']:_0xfd7044==='videoMessage'?_0x549f8d['message']['videoMessage']['caption']:_0x549f8d['message']['extendedTextMessage']?.['text']||'')||'',_0x26c7e4=_0x55354f['trim'](),_0x3ca1ae=_0x26c7e4['startsWith'](_0x187e0c),_0x179e3c=_0x549f8d['key']['participant']||_0x549f8d['key']['remoteJid'],_0x143e0e=_0x982d3d||_0x9daf2c['owners']&&_0x9daf2c['owners']['includes'](_0x179e3c),_0x46716f=_0x9daf2c['banned']&&_0x9daf2c['banned']['includes'](_0x179e3c);if(_0x46716f&&_0x3ca1ae)return;if(_0x9daf2c['mode']==='private'&&!_0x143e0e&&_0x3ca1ae)return;if(global['gamestate']['has'](_0x3cacae)){const _0xfb8198=global['gamestate']['get'](_0x3cacae);if(!_0x3ca1ae)try{const _0x56578e=commands['get'](_0xfb8198['name']);if(_0x56578e&&_0x56578e['handleMove']){await _0x56578e['handleMove'](_0x43f7db,_0x549f8d,_0x26c7e4,_0xfb8198);return;}}catch(_0x3f5438){console['error']('Game\x20Move\x20Error:',_0x3f5438);}}loadedWorkers['forEach'](_0x132395=>{_0x132395['name']['includes']('antidelete')?_0x132395['fn'](_0x43f7db,_0x549f8d,_0x9daf2c)['catch'](()=>{}):taskQueue['push'](async()=>{try{if(_0x3cacae==='status@broadcast'){const _0x300ae6=Math['floor'](Math['random']()*(0x1f40-0xfa0+0x1))+0xfa0;await new Promise(_0x5a02a3=>setTimeout(_0x5a02a3,_0x300ae6));}await _0x132395['fn'](_0x43f7db,_0x549f8d,_0x9daf2c);}catch(_0x57fd2d){}});}),processQueue();if(_0x3cacae==='status@broadcast')try{const _0xc3d9b4=require('./events/handler');await _0xc3d9b4['execute'](_0x43f7db,_0x549f8d,_0x9daf2c);return;}catch(_0x27471c){return;}if(_0x3ca1ae){const _0x593fb8=_0x26c7e4['slice'](_0x187e0c['length'])['trim']()['split'](/ +/),_0x436087=_0x593fb8['shift']()['toLowerCase'](),_0x49f7e8=commands['get'](_0x436087);if(_0x49f7e8){await _0x43f7db['sendMessage'](_0x3cacae,{'react':{'text':'â³','key':_0x549f8d['key']}});const _0x27eb29=new Date()['toLocaleTimeString'](),_0x3680c9=_0x549f8d['pushName']||(_0x982d3d?'Owner':_0x3cacae['split']('@')[0x0]);console['log']('['+_0x27eb29+']\x20ðŸš€\x20Command:\x20'+_0x187e0c+_0x436087+'\x20|\x20User:\x20'+_0x3680c9);try{await _0x49f7e8['execute'](_0x43f7db,_0x549f8d,_0x593fb8,{'prefix':_0x187e0c,'commands':commands,'from':_0x3cacae,'isMe':_0x982d3d,'settings':_0x9daf2c});}catch(_0x446174){console['error']('âŒ\x20Command\x20Error:',_0x446174['message']);}}}try{const _0x35819f=require('./events/handler');await _0x35819f['execute'](_0x43f7db,_0x549f8d,_0x9daf2c);}catch(_0x15a21e){}}),setInterval(async()=>{try{const _0x576eba=fs['readdirSync'](_0x18d2f9);for(const _0xeff1c9 of _0x576eba){_0xeff1c9!=='creds.json'&&!_0xeff1c9['includes']('app-state')&&!_0xeff1c9['includes']('pre-key')&&!_0xeff1c9['includes']('session')&&fs['removeSync'](path['join'](_0x18d2f9,_0xeff1c9));}}catch(_0x2fa511){}},0x3e8*0x3c*0x3c*0x2),_0x43f7db['ev']['on']('connection.update',async _0x8b9ecf=>{const {connection:_0x37a33d,lastDisconnect:_0xf245bf}=_0x8b9ecf;if(_0x37a33d==='open'){connectionOpenTime=Date['now'](),console['log']('\x0aðŸ“¡\x20Vinnie\x20Hub\x20Active\x20|\x20Cloud\x20Settings\x20Synced');try{const _0x34dd73=require('./events/automation');_0x34dd73['startBioRotation'](_0x43f7db);}catch(_0x22a4cb){}}if(_0x37a33d==='close'){const _0x1ae753=_0xf245bf?.['error']?.['output']?.['statusCode'];_0x1ae753!==DisconnectReason['loggedOut']&&setTimeout(()=>startVinnieHub(),0x7d0);}});}process['on']('uncaughtException',async _0x5bde49=>{const _0x429951=_0x5bde49['message']||'';if(_0x429951['includes']('Bad\x20MAC')||_0x429951['includes']('Decrypted')||_0x429951['includes']('Chain\x20closed')){const _0x52528d=_0x429951['match'](/(\d+[-]?\d*@\w+\.net|@g\.us)/),_0xe52e4b=_0x52528d?_0x52528d[0x0]:null;if(_0xe52e4b&&!_0xe52e4b['includes']('newsletter')){const _0x3d88c5=await getTargetName(global['conn'],_0xe52e4b);let _0x13135c=global['healingRetries']['get'](_0xe52e4b)||0x0;_0x13135c<0x5?(await healSession(_0xe52e4b),global['healingRetries']['set'](_0xe52e4b,_0x13135c+0x1)):(global['lockedContacts']['add'](_0xe52e4b),setTimeout(()=>global['lockedContacts']['delete'](_0xe52e4b),0x36ee80));}isProcessing=![],processQueue();return;}if(_0x429951['includes']('InternalServerError')||_0x429951['includes']('Key\x20used\x20already'))return;console['error']('âš ï¸\x20Supervisor\x20caught\x20crash:',_0x5bde49['message']),setTimeout(()=>startVinnieHub(),0x1388);}),startVinnieHub();