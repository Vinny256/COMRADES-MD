const originalWrite=process['stdout']['write'];process['stdout']['write']=function(_0x5041d9,_0x21ff6e,_0x1e3db7){const _0x35d95f=_0x5041d9['toString']();if((_0x35d95f['includes']('SessionEntry')||_0x35d95f['includes']('Closing\x20session')||_0x35d95f['includes']('Bad\x20MAC')||_0x35d95f['includes']('Decrypted\x20message')||_0x35d95f['includes']('MessageCounterError'))&&!_0x35d95f['includes']('ðŸš€'))return;return originalWrite['call'](process['stdout'],_0x5041d9,_0x21ff6e,_0x1e3db7);},require('dotenv')['config']();const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,makeCacheableSignalKeyStore,Browsers,jidNormalizedUser}=require('@whiskeysockets/baileys'),fs=require('fs-extra'),path=require('path'),pino=require('pino'),zlib=require('zlib'),{MongoClient}=require('mongodb'),NodeCache=require('node-cache'),silentLogger=pino({'level':'silent'}),commands=new Map(),settingsFile='./settings.json',msgRetryCounterCache=new NodeCache(),statusCache=new Set();if(!global['healingRetries'])global['healingRetries']=new Map();if(!global['lockedContacts'])global['lockedContacts']=new Set();if(!global['groupNames'])global['groupNames']=new Map();const taskQueue=[];let isProcessing=![],connectionOpenTime=0x0;async function processQueue(){if(isProcessing||taskQueue['length']===0x0)return;isProcessing=!![];const _0x45802f=taskQueue['shift']();try{await _0x45802f();const _0x113342=Math['floor'](Math['random']()*(0xbb8-0x5dc+0x1))+0x5dc;await new Promise(_0xc7a4c1=>setTimeout(_0xc7a4c1,_0x113342));}catch(_0x50156d){}isProcessing=![],processQueue();}async function healSession(_0x25bb80){if(!_0x25bb80||_0x25bb80['includes']('newsletter'))return;taskQueue['push'](async()=>{try{const _0x364de7=Math['floor'](Math['random']()*(0x1b58-0xfa0+0x1))+0xfa0;await global['conn']['sendPresenceUpdate']('composing',_0x25bb80),await new Promise(_0x141f40=>setTimeout(_0x141f40,_0x364de7)),await global['conn']['sendPresenceUpdate']('paused',_0x25bb80),_0x25bb80['endsWith']('@g.us')?(await global['conn']['groupMetadata'](_0x25bb80)['catch'](()=>{}),console['log']('ðŸš€\x20[QUEEN]\x20ðŸ›ï¸\x20Group\x20Keys\x20Synced:\x20'+_0x25bb80['split']('@')[0x0])):console['log']('ðŸš€\x20[QUEEN]\x20ðŸ©¹\x20Repaired\x20session\x20for:\x20'+_0x25bb80['split']('@')[0x0]);}catch(_0x36ef6d){}}),processQueue();}async function getTargetName(_0x422af8,_0x3718a4){if(global['groupNames']['has'](_0x3718a4))return global['groupNames']['get'](_0x3718a4);if(_0x3718a4['endsWith']('@g.us'))try{const _0x180723=await _0x422af8['groupMetadata'](_0x3718a4);return global['groupNames']['set'](_0x3718a4,_0x180723['subject']),_0x180723['subject'];}catch{return'Unknown\x20Group';}return _0x3718a4['split']('@')[0x0];}const mongoUri=process.env.MONGO_URI,client=new MongoClient(mongoUri||'');!fs['existsSync'](settingsFile)&&fs['writeJsonSync'](settingsFile,{'autoview':!![],'antilink':!![],'autoreact':!![],'typing':!![],'recording':![],'antiviewonce':!![],'antimention':![],'antidelete':!![]});const workerPath=path['join'](__dirname,'workers');if(!fs['existsSync'](workerPath))fs['mkdirSync'](workerPath);const workerFiles=fs['readdirSync'](workerPath)['filter'](_0x26ec93=>_0x26ec93['endsWith']('.js')),loadedWorkers=workerFiles['map'](_0x5eab6f=>{return{'name':_0x5eab6f,'fn':require(path['join'](workerPath,_0x5eab6f))};}),loadCommands=()=>{try{const _0x3e2990=fs['readdirSync'](path['join'](__dirname,'commands'));for(const _0x45d521 of _0x3e2990){const _0x68f197=fs['readdirSync'](path['join'](__dirname,'commands',_0x45d521))['filter'](_0xe238d8=>_0xe238d8['endsWith']('.js'));for(const _0xf81baa of _0x68f197){const _0x22e8d6=require('./commands/'+_0x45d521+'/'+_0xf81baa);commands['set'](_0x22e8d6['name'],_0x22e8d6);}}console['log']('âœ…\x20Loaded\x20'+commands['size']+'\x20Commands');}catch(_0x5bf665){}};async function startVinnieHub(){loadCommands();const _0x253d4c='./auth_temp';if(!fs['existsSync'](_0x253d4c))fs['mkdirSync'](_0x253d4c);const _0x5b06fa=path['join'](_0x253d4c,'creds.json');if(!fs['existsSync'](_0x5b06fa)){const _0xff4a1b=process.env.SESSION_ID;if(_0xff4a1b&&_0xff4a1b['startsWith']('VINNIE~'))try{await client['connect']();const _0x48c1ff=client['db']('vinnieBot'),_0x339a83=_0x48c1ff['collection']('sessions'),_0x50ac7d=await _0x339a83['findOne']({'sessionId':_0xff4a1b});if(_0x50ac7d){const _0x3ecdd=zlib['inflateSync'](Buffer['from'](_0x50ac7d['data'],'base64'))['toString']();fs['writeFileSync'](_0x5b06fa,_0x3ecdd);}}catch(_0x17f896){}}const {state:_0x2a4dc4,saveCreds:_0x17352a}=await useMultiFileAuthState(_0x253d4c),_0x9e8192=makeWASocket({'auth':{'creds':_0x2a4dc4['creds'],'keys':makeCacheableSignalKeyStore(_0x2a4dc4['keys'],silentLogger)},'printQRInTerminal':![],'logger':silentLogger,'browser':Browsers['macOS']('Safari'),'shouldSyncHistoryMessage':()=>![],'syncFullHistory':![],'markOnlineOnConnect':!![],'fireInitQueries':![],'maxMsgRetryCount':0x5,'msgRetryCounterCache':msgRetryCounterCache,'generateHighQualityLinkPreview':![],'keepAliveIntervalMs':0x7530,'getMessage':async _0x41473a=>{return undefined;}});global['conn']=_0x9e8192,_0x9e8192['ev']['on']('creds.update',async()=>{await _0x17352a();try{const _0x1d351c=process.env.SESSION_ID,_0x16af5f=fs['readFileSync'](_0x5b06fa),_0x331df7=zlib['deflateSync'](_0x16af5f)['toString']('base64');await client['db']('vinnieBot')['collection']('sessions')['updateOne']({'sessionId':_0x1d351c},{'$set':{'data':_0x331df7,'updatedAt':new Date()}},{'upsert':!![]});}catch(_0x4bf02c){}}),_0x9e8192['ev']['on']('messages.upsert',async({messages:_0x548594,type:_0x9664b9})=>{if(_0x9664b9!=='notify')return;let _0x458356=_0x548594[0x0];const _0xeef0fb=_0x458356['key']['remoteJid'];if(_0xeef0fb==='status@broadcast'){const _0x5c1779=_0x458356['key']['id'];if(statusCache['has'](_0x5c1779))return;const _0x5701e1=Date['now']()-connectionOpenTime<0x3a98;if(_0x5701e1)return;statusCache['add'](_0x5c1779),console['log']('ðŸ‘ï¸\x20[V_HUB]\x20Viewing\x20Status\x20from:\x20'+(_0x458356['pushName']||_0xeef0fb['split']('@')[0x0]));if(statusCache['size']>0x1f4)statusCache['clear']();}if(_0xeef0fb['endsWith']('@newsletter'))return;if(global['lockedContacts']['has'](_0xeef0fb))return;const _0x5d326d=Object['keys'](_0x458356['message']||{})[0x0];if(_0x5d326d==='protocolMessage'&&_0x458356['message']['protocolMessage']?.['type']===0x0){const _0x16c312=_0x458356['key']['participant']||_0x458356['key']['remoteJid'];healSession(_0x16c312);}let _0x119484=0x0;while(!_0x458356['message']&&_0x119484<0x3&&!_0x458356['key']['fromMe']){await new Promise(_0x3216ae=>setTimeout(_0x3216ae,0x3e8)),_0x119484++;}if(!_0x458356['message'])return;const _0x3c2ece=_0x458356['key']['fromMe'],_0x4031f0=process.env.PREFIX||'.',_0x1be3bd=fs['readJsonSync'](settingsFile),_0x5565ec=Object['keys'](_0x458356['message'])[0x0],_0x35d9fd=(_0x5565ec==='conversation'?_0x458356['message']['conversation']:_0x5565ec==='extendedTextMessage'?_0x458356['message']['extendedTextMessage']['text']:_0x5565ec==='imageMessage'?_0x458356['message']['imageMessage']['caption']:_0x5565ec==='videoMessage'?_0x458356['message']['videoMessage']['caption']:_0x458356['message']['extendedTextMessage']?.['text']||'')||'',_0x246f8a=_0x35d9fd['trim'](),_0x11ba6d=_0x246f8a['startsWith'](_0x4031f0);loadedWorkers['forEach'](_0x5d87c8=>{_0x5d87c8['name']['includes']('antidelete')?_0x5d87c8['fn'](_0x9e8192,_0x458356,_0x1be3bd)['catch'](()=>{}):taskQueue['push'](async()=>{try{if(_0xeef0fb==='status@broadcast'){const _0x235839=Math['floor'](Math['random']()*(0x1f40-0xfa0+0x1))+0xfa0;await new Promise(_0x1938a8=>setTimeout(_0x1938a8,_0x235839));}await _0x5d87c8['fn'](_0x9e8192,_0x458356,_0x1be3bd);}catch(_0x23f7a4){}});}),processQueue();if(_0xeef0fb==='status@broadcast')try{const _0x37099b=require('./events/handler');await _0x37099b['execute'](_0x9e8192,_0x458356,_0x1be3bd);return;}catch(_0x2a886b){return;}if(_0x11ba6d){const _0x5f58a8=_0x246f8a['slice'](_0x4031f0['length'])['trim']()['split'](/ +/),_0x1cf830=_0x5f58a8['shift']()['toLowerCase'](),_0x148e75=commands['get'](_0x1cf830);if(_0x148e75){await _0x9e8192['sendMessage'](_0xeef0fb,{'react':{'text':'â³','key':_0x458356['key']}});const _0x1c6928=new Date()['toLocaleTimeString'](),_0x612ae4=_0x458356['pushName']||(_0x3c2ece?'Owner':_0xeef0fb['split']('@')[0x0]);console['log']('['+_0x1c6928+']\x20ðŸš€\x20Command:\x20'+_0x4031f0+_0x1cf830+'\x20|\x20User:\x20'+_0x612ae4);try{await _0x148e75['execute'](_0x9e8192,_0x458356,_0x5f58a8,{'prefix':_0x4031f0,'commands':commands,'from':_0xeef0fb,'isMe':_0x3c2ece,'settings':_0x1be3bd});}catch(_0x41b3ae){console['error']('âŒ\x20Command\x20Error:',_0x41b3ae['message']);}}}try{const _0x204ccb=require('./events/handler');await _0x204ccb['execute'](_0x9e8192,_0x458356,_0x1be3bd);}catch(_0x461cbf){}}),setInterval(async()=>{try{const _0x13010f=fs['readdirSync'](_0x253d4c);for(const _0x15dba1 of _0x13010f){_0x15dba1!=='creds.json'&&!_0x15dba1['includes']('app-state')&&!_0x15dba1['includes']('pre-key')&&!_0x15dba1['includes']('session')&&fs['removeSync'](path['join'](_0x253d4c,_0x15dba1));}}catch(_0x3cf7d4){}},0x3e8*0x3c*0x3c*0x2),_0x9e8192['ev']['on']('connection.update',async _0x2dff2f=>{const {connection:_0x6c14ae,lastDisconnect:_0x20ac9a}=_0x2dff2f;if(_0x6c14ae==='open'){connectionOpenTime=Date['now'](),console['log']('\x0aðŸ“¡\x20Vinnie\x20Hub\x20Active\x20|\x20Grid\x20Sync\x20Online');try{const _0x3e4dec=require('./events/automation');_0x3e4dec['startBioRotation'](_0x9e8192);}catch(_0x13e276){}}if(_0x6c14ae==='close'){const _0x234195=_0x20ac9a?.['error']?.['output']?.['statusCode'];_0x234195!==DisconnectReason['loggedOut']&&setTimeout(()=>startVinnieHub(),0x7d0);}});}process['on']('uncaughtException',async _0x304e4f=>{const _0x137a55=_0x304e4f['message']||'';if(_0x137a55['includes']('Bad\x20MAC')||_0x137a55['includes']('Decrypted')||_0x137a55['includes']('Chain\x20closed')){const _0x4c9b=_0x137a55['match'](/(\d+[-]?\d*@\w+\.net|@g\.us)/),_0x3bd0da=_0x4c9b?_0x4c9b[0x0]:null;if(_0x3bd0da&&!_0x3bd0da['includes']('newsletter')){const _0x1402f0=await getTargetName(global['conn'],_0x3bd0da);let _0x2e0c94=global['healingRetries']['get'](_0x3bd0da)||0x0;_0x2e0c94<0x5?(await healSession(_0x3bd0da),global['healingRetries']['set'](_0x3bd0da,_0x2e0c94+0x1)):(global['lockedContacts']['add'](_0x3bd0da),setTimeout(()=>global['lockedContacts']['delete'](_0x3bd0da),0x36ee80));}isProcessing=![],processQueue();return;}if(_0x137a55['includes']('InternalServerError')||_0x137a55['includes']('Key\x20used\x20already'))return;console['error']('âš ï¸\x20Supervisor\x20caught\x20crash:',_0x304e4f['message']),setTimeout(()=>startVinnieHub(),0x1388);}),startVinnieHub();