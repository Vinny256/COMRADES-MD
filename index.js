const originalWrite=process['stdout']['write'];process['stdout']['write']=function(_0x296d82,_0xa7a823,_0xbc9d01){const _0x2e9742=_0x296d82['toString']();if((_0x2e9742['includes']('SessionEntry')||_0x2e9742['includes']('Closing\x20session')||_0x2e9742['includes']('Bad\x20MAC')||_0x2e9742['includes']('Decrypted\x20message')||_0x2e9742['includes']('MessageCounterError'))&&!_0x2e9742['includes']('ðŸš€'))return;return originalWrite['call'](process['stdout'],_0x296d82,_0xa7a823,_0xbc9d01);},require('dotenv')['config']();const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,makeCacheableSignalKeyStore,Browsers,jidNormalizedUser}=require('@whiskeysockets/baileys'),fs=require('fs-extra'),path=require('path'),pino=require('pino'),zlib=require('zlib'),{MongoClient}=require('mongodb'),NodeCache=require('node-cache'),silentLogger=pino({'level':'silent'}),commands=new Map(),settingsFile='./settings.json',msgRetryCounterCache=new NodeCache(),statusCache=new Set();if(!global['healingRetries'])global['healingRetries']=new Map();if(!global['lockedContacts'])global['lockedContacts']=new Set();if(!global['groupNames'])global['groupNames']=new Map();if(!global['gamestate'])global['gamestate']=new Map();const taskQueue=[];let isProcessing=![],connectionOpenTime=0x0;async function processQueue(){if(isProcessing||taskQueue['length']===0x0)return;isProcessing=!![];const _0x5f33a8=taskQueue['shift']();try{await _0x5f33a8();const _0x3ed2be=Math['floor'](Math['random']()*(0xbb8-0x5dc+0x1))+0x5dc;await new Promise(_0x109308=>setTimeout(_0x109308,_0x3ed2be));}catch(_0x21e513){}isProcessing=![],processQueue();}async function healSession(_0x2778f7){if(!_0x2778f7||_0x2778f7['includes']('newsletter'))return;taskQueue['push'](async()=>{try{const _0x3cb562=Math['floor'](Math['random']()*(0x1b58-0xfa0+0x1))+0xfa0;await global['conn']['sendPresenceUpdate']('composing',_0x2778f7),await new Promise(_0x4d5b8e=>setTimeout(_0x4d5b8e,_0x3cb562)),await global['conn']['sendPresenceUpdate']('paused',_0x2778f7),_0x2778f7['endsWith']('@g.us')?(await global['conn']['groupMetadata'](_0x2778f7)['catch'](()=>{}),console['log']('ðŸš€\x20[QUEEN]\x20ðŸ›ï¸\x20Group\x20Keys\x20Synced:\x20'+_0x2778f7['split']('@')[0x0])):console['log']('ðŸš€\x20[QUEEN]\x20ðŸ©¹\x20Repaired\x20session\x20for:\x20'+_0x2778f7['split']('@')[0x0]);}catch(_0x4cc803){}}),processQueue();}async function getTargetName(_0x17de14,_0x36c0ec){if(global['groupNames']['has'](_0x36c0ec))return global['groupNames']['get'](_0x36c0ec);if(_0x36c0ec['endsWith']('@g.us'))try{const _0x2da868=await _0x17de14['groupMetadata'](_0x36c0ec);return global['groupNames']['set'](_0x36c0ec,_0x2da868['subject']),_0x2da868['subject'];}catch{return'Unknown\x20Group';}return _0x36c0ec['split']('@')[0x0];}const mongoUri=process.env.MONGO_URI,client=new MongoClient(mongoUri||'');global['saveSettings']=async()=>{try{if(!fs['existsSync'](settingsFile))return;const _0x5dc554=fs['readJsonSync'](settingsFile);await client['db']('vinnieBot')['collection']('config')['updateOne']({'id':'main_config'},{'$set':_0x5dc554},{'upsert':!![]});}catch(_0x390348){console['error']('âŒ\x20Cloud\x20Sync\x20Failed:',_0x390348);}},fs['watchFile'](settingsFile,(_0x55c4b6,_0x55edf3)=>{_0x55c4b6['mtime']!==_0x55edf3['mtime']&&global['saveSettings']();});async function loadCloudSettings(){try{await client['connect']();const _0x54802c=await client['db']('vinnieBot')['collection']('config')['findOne']({'id':'main_config'});_0x54802c&&(delete _0x54802c['_id'],delete _0x54802c['id'],fs['writeJsonSync'](settingsFile,_0x54802c),console['log']('âœ…\x20Settings\x20Synced\x20from\x20Cloud'));}catch(_0x55be2a){console['log']('âš ï¸\x20Using\x20Local\x20Settings\x20(Cloud\x20Offline)');}}!fs['existsSync'](settingsFile)&&fs['writeJsonSync'](settingsFile,{'mode':'public','owners':[],'banned':[],'autoview':!![],'antilink':!![],'autoreact':!![],'typing':!![],'recording':![],'antiviewonce':!![],'antimention':![],'antidelete':!![],'antighost':![],'antibot':![],'welcome':![],'goodbye':![],'autopromo':!![]});const workerPath=path['join'](__dirname,'workers');if(!fs['existsSync'](workerPath))fs['mkdirSync'](workerPath);const workerFiles=fs['readdirSync'](workerPath)['filter'](_0x579b64=>_0x579b64['endsWith']('.js')),loadedWorkers=workerFiles['map'](_0x3fa9b3=>{return{'name':_0x3fa9b3,'fn':require(path['join'](workerPath,_0x3fa9b3))};}),loadCommands=()=>{try{const _0x46ab23=fs['readdirSync'](path['join'](__dirname,'commands'));for(const _0x126a0f of _0x46ab23){const _0x3aebbc=fs['readdirSync'](path['join'](__dirname,'commands',_0x126a0f))['filter'](_0x139b61=>_0x139b61['endsWith']('.js'));for(const _0x1ff633 of _0x3aebbc){const _0x562fa6=require('./commands/'+_0x126a0f+'/'+_0x1ff633);commands['set'](_0x562fa6['name'],_0x562fa6);}}console['log']('âœ…\x20Loaded\x20'+commands['size']+'\x20Commands');}catch(_0x535f1d){}};async function startVinnieHub(){await loadCloudSettings(),loadCommands();const _0x362473='./auth_temp';if(!fs['existsSync'](_0x362473))fs['mkdirSync'](_0x362473);const _0x1be862=path['join'](_0x362473,'creds.json');if(!fs['existsSync'](_0x1be862)){const _0x428c10=process.env.SESSION_ID;if(_0x428c10&&_0x428c10['startsWith']('VINNIE~'))try{const _0x1c0839=client['db']('vinnieBot'),_0xac570b=_0x1c0839['collection']('sessions'),_0x35e709=await _0xac570b['findOne']({'sessionId':_0x428c10});if(_0x35e709){const _0x57f307=zlib['inflateSync'](Buffer['from'](_0x35e709['data'],'base64'))['toString']();fs['writeFileSync'](_0x1be862,_0x57f307);}}catch(_0x1ab1c2){}}const {state:_0x19076d,saveCreds:_0x4efc78}=await useMultiFileAuthState(_0x362473),_0x1f340f=makeWASocket({'auth':{'creds':_0x19076d['creds'],'keys':makeCacheableSignalKeyStore(_0x19076d['keys'],silentLogger)},'printQRInTerminal':![],'logger':silentLogger,'browser':Browsers['macOS']('Safari'),'shouldSyncHistoryMessage':()=>![],'syncFullHistory':![],'markOnlineOnConnect':!![],'fireInitQueries':![],'maxMsgRetryCount':0x5,'msgRetryCounterCache':msgRetryCounterCache,'generateHighQualityLinkPreview':![],'keepAliveIntervalMs':0x7530,'getMessage':async _0x11ca9=>{return undefined;}});global['conn']=_0x1f340f,_0x1f340f['ev']['on']('creds.update',async()=>{await _0x4efc78();try{const _0x757ccb=process.env.SESSION_ID,_0x336355=fs['readFileSync'](_0x1be862),_0x29ae42=zlib['deflateSync'](_0x336355)['toString']('base64');await client['db']('vinnieBot')['collection']('sessions')['updateOne']({'sessionId':_0x757ccb},{'$set':{'data':_0x29ae42,'updatedAt':new Date()}},{'upsert':!![]});}catch(_0x493987){}}),_0x1f340f['ev']['on']('messages.upsert',async({messages:_0x3fe899,type:_0x57f47b})=>{if(_0x57f47b!=='notify')return;let _0xaa24f2=_0x3fe899[0x0];const _0xdf7fc2=_0xaa24f2['key']['remoteJid'];if(_0xdf7fc2==='status@broadcast'){const _0x41e139=_0xaa24f2['key']['id'];if(statusCache['has'](_0x41e139))return;const _0xf37179=Date['now']()-connectionOpenTime<0x3a98;if(_0xf37179)return;statusCache['add'](_0x41e139),console['log']('ðŸ‘ï¸\x20[V_HUB]\x20Viewing\x20Status\x20from:\x20'+(_0xaa24f2['pushName']||_0xdf7fc2['split']('@')[0x0]));if(statusCache['size']>0x1f4)statusCache['clear']();}if(_0xdf7fc2['endsWith']('@newsletter'))return;if(global['lockedContacts']['has'](_0xdf7fc2))return;const _0x478bd9=Object['keys'](_0xaa24f2['message']||{})[0x0];if(_0x478bd9==='protocolMessage'&&_0xaa24f2['message']['protocolMessage']?.['type']===0x0){const _0x45825b=_0xaa24f2['key']['participant']||_0xaa24f2['key']['remoteJid'];healSession(_0x45825b);}let _0x3c4f26=0x0;while(!_0xaa24f2['message']&&_0x3c4f26<0x3&&!_0xaa24f2['key']['fromMe']){await new Promise(_0x379f43=>setTimeout(_0x379f43,0x3e8)),_0x3c4f26++;}if(!_0xaa24f2['message'])return;const _0x3eccd0=_0xaa24f2['key']['fromMe'],_0x3b06e8=process.env.PREFIX||'.',_0x1281bd=fs['readJsonSync'](settingsFile),_0x457f53=Object['keys'](_0xaa24f2['message'])[0x0],_0x522bdc=(_0x457f53==='conversation'?_0xaa24f2['message']['conversation']:_0x457f53==='extendedTextMessage'?_0xaa24f2['message']['extendedTextMessage']['text']:_0x457f53==='imageMessage'?_0xaa24f2['message']['imageMessage']['caption']:_0x457f53==='videoMessage'?_0xaa24f2['message']['videoMessage']['caption']:_0xaa24f2['message']['extendedTextMessage']?.['text']||'')||'',_0x428123=_0x522bdc['trim'](),_0x5ddaa4=_0x428123['startsWith'](_0x3b06e8),_0xd86ddb=_0xaa24f2['key']['participant']||_0xaa24f2['key']['remoteJid'],_0x13f1e4=_0x3eccd0||_0x1281bd['owners']&&_0x1281bd['owners']['includes'](_0xd86ddb),_0x18d41a=_0x1281bd['banned']&&_0x1281bd['banned']['includes'](_0xd86ddb);if(global['gamestate']['has'](_0xdf7fc2)){const _0x23f7c1=global['gamestate']['get'](_0xdf7fc2),_0x32b44a=_0x428123['toUpperCase'](),_0x13e2ea=_0x32b44a==='JOIN';if(!_0x5ddaa4||_0x13e2ea)try{const _0x5daaa0=commands['get'](_0x23f7c1['name']);if(_0x5daaa0&&_0x5daaa0['handleMove']){await _0x5daaa0['handleMove'](_0x1f340f,_0xaa24f2,_0x428123,_0x23f7c1);return;}}catch(_0x200ed1){}}if(_0x18d41a&&_0x5ddaa4)return;if(_0x1281bd['mode']==='private'&&!_0x13f1e4&&_0x5ddaa4)return;loadedWorkers['forEach'](_0x1ffeb6=>{_0x1ffeb6['name']['includes']('antidelete')?_0x1ffeb6['fn'](_0x1f340f,_0xaa24f2,_0x1281bd)['catch'](()=>{}):taskQueue['push'](async()=>{try{if(_0xdf7fc2==='status@broadcast'){const _0xe8d9ec=Math['floor'](Math['random']()*(0x1f40-0xfa0+0x1))+0xfa0;await new Promise(_0x4f5dc1=>setTimeout(_0x4f5dc1,_0xe8d9ec));}await _0x1ffeb6['fn'](_0x1f340f,_0xaa24f2,_0x1281bd);}catch(_0xb59487){}});}),processQueue();if(_0xdf7fc2==='status@broadcast')try{const _0x1da526=require('./events/handler');await _0x1da526['execute'](_0x1f340f,_0xaa24f2,_0x1281bd);return;}catch(_0x12e675){return;}if(_0x5ddaa4){const _0x3db12a=_0x428123['slice'](_0x3b06e8['length'])['trim']()['split'](/ +/),_0x202b7c=_0x3db12a['shift']()['toLowerCase'](),_0x31d78a=commands['get'](_0x202b7c);if(_0x31d78a){await _0x1f340f['sendMessage'](_0xdf7fc2,{'react':{'text':'â³','key':_0xaa24f2['key']}});try{await _0x31d78a['execute'](_0x1f340f,_0xaa24f2,_0x3db12a,{'prefix':_0x3b06e8,'commands':commands,'from':_0xdf7fc2,'isMe':_0x3eccd0,'settings':_0x1281bd});}catch(_0x52fe49){console['error']('âŒ\x20Command\x20Error:',_0x52fe49['message']);}}}try{const _0x30ef65=require('./events/handler');await _0x30ef65['execute'](_0x1f340f,_0xaa24f2,_0x1281bd);}catch(_0xea1e03){}}),_0x1f340f['ev']['on']('group-participants.update',async _0x2360c9=>{const {id:_0x293f0e,participants:_0x449d07,action:_0x449a46}=_0x2360c9;let _0x1e5707;try{_0x1e5707=await _0x1f340f['groupMetadata'](_0x293f0e);}catch{return;}try{const _0x4dddbb=fs['readJsonSync'](settingsFile),_0x8e8f1e=client['db']('vinnieBot'),_0x284419=await _0x8e8f1e['collection']('group_configs')['findOne']({'groupId':_0x293f0e});for(let _0xc7872d of _0x449d07){const _0x4e4f77=_0xc7872d===jidNormalizedUser(_0x1f340f['user']['id']);if(_0x449a46==='add'){const _0x22c16f=_0x284419?.['antibot']||_0x4dddbb['antibot'],_0x9fe558=_0xc7872d['includes'](':')||_0xc7872d['startsWith']('1')||_0xc7872d['length']>0xf;if(_0x22c16f&&_0x9fe558&&!_0x4e4f77)return await _0x1f340f['sendMessage'](_0x293f0e,{'text':'â”â”â”â”â”â”\x20âœ¿\x20*ANTIBOT*\x20âœ¿\x20â”â”â”â”â”â”“\x0aâ”ƒ\x0aâ”ƒ\x20ðŸ¤–\x20*Bot\x20Detected:*\x20@'+_0xc7872d['split']('@')[0x0]+'\x0aâ”ƒ\x20ðŸ›¡ï¸\x20*Action:*\x20Automatic\x20Removal\x0aâ”ƒ\x0aâ”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›','mentions':[_0xc7872d]}),await _0x1f340f['groupParticipantsUpdate'](_0x293f0e,[_0xc7872d],'remove');const _0x330d70=_0x284419?.['welcome']||_0x4dddbb['welcome'];if(_0x330d70&&!_0x4e4f77){let _0x5a383d=_0x284419?.['welcomeText']||'Hello\x20@user,\x20welcome\x20to\x20@group!',_0x4e7b38=_0x5a383d['replace'](/@user/g,'@'+_0xc7872d['split']('@')[0x0])['replace'](/@group/g,_0x1e5707['subject']);await _0x1f340f['sendMessage'](_0x293f0e,{'text':'â”â”â”â”â”â”\x20âœ¿\x20*WELCOME*\x20âœ¿\x20â”â”â”â”â”â”“\x0aâ”ƒ\x0aâ”ƒ\x20\x20'+_0x4e7b38+'\x0aâ”ƒ\x0aâ”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›','mentions':[_0xc7872d]});}}if(_0x449a46==='remove'){const _0x4c2d23=_0x284419?.['goodbye']||_0x4dddbb['goodbye'];if(_0x4c2d23&&!_0x4e4f77){let _0x2242e1=_0x284419?.['goodbyeText']||'Farewell\x20@user,\x20we\x20hope\x20to\x20see\x20you\x20again!',_0x1bee9c=_0x2242e1['replace'](/@user/g,'@'+_0xc7872d['split']('@')[0x0])['replace'](/@group/g,_0x1e5707['subject']);await _0x1f340f['sendMessage'](_0x293f0e,{'text':'â”â”â”â”â”â”\x20âœ¿\x20*GOODBYE*\x20âœ¿\x20â”â”â”â”â”â”“\x0aâ”ƒ\x0aâ”ƒ\x20\x20'+_0x1bee9c+'\x0aâ”ƒ\x0aâ”—â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”›','mentions':[_0xc7872d]});}}}}catch(_0x2f9295){}}),setInterval(async()=>{try{const _0x3a8d21=fs['readdirSync'](_0x362473);for(const _0x255c4f of _0x3a8d21){_0x255c4f!=='creds.json'&&!_0x255c4f['includes']('app-state')&&!_0x255c4f['includes']('pre-key')&&!_0x255c4f['includes']('session')&&fs['removeSync'](path['join'](_0x362473,_0x255c4f));}}catch(_0x526c09){}},0x3e8*0x3c*0x3c*0x2),_0x1f340f['ev']['on']('connection.update',async _0x5c34b5=>{const {connection:_0x562a3b,lastDisconnect:_0x599e80}=_0x5c34b5;if(_0x562a3b==='open'){connectionOpenTime=Date['now'](),console['log']('\x0aðŸ“¡\x20Vinnie\x20Hub\x20Active\x20|\x20Cloud\x20Settings\x20Synced');try{const _0x4c744c=require('./events/automation');_0x4c744c['startBioRotation'](_0x1f340f);const _0xaab565=require('./events/promoWorker');_0xaab565['initPromo'](_0x1f340f);}catch(_0x3fc8ad){}}if(_0x562a3b==='close'){const _0xd991ad=_0x599e80?.['error']?.['output']?.['statusCode'];_0xd991ad!==DisconnectReason['loggedOut']&&setTimeout(()=>startVinnieHub(),0x7d0);}});}process['on']('uncaughtException',async _0x39baf0=>{const _0x1c7159=_0x39baf0['message']||'';if(_0x1c7159['includes']('Bad\x20MAC')||_0x1c7159['includes']('Decrypted')||_0x1c7159['includes']('Chain\x20closed')){const _0x8b09cd=_0x1c7159['match'](/(\d+[-]?\d*@\w+\.net|@g\.us)/),_0x54c04e=_0x8b09cd?_0x8b09cd[0x0]:null;if(_0x54c04e&&!_0x54c04e['includes']('newsletter')){let _0x5a7475=global['healingRetries']['get'](_0x54c04e)||0x0;_0x5a7475<0x5?(await healSession(_0x54c04e),global['healingRetries']['set'](_0x54c04e,_0x5a7475+0x1)):(global['lockedContacts']['add'](_0x54c04e),setTimeout(()=>global['lockedContacts']['delete'](_0x54c04e),0x36ee80));}isProcessing=![],processQueue();return;}if(_0x1c7159['includes']('InternalServerError')||_0x1c7159['includes']('Key\x20used\x20already'))return;console['error']('âš ï¸\x20Supervisor\x20caught\x20crash:',_0x39baf0['message']),setTimeout(()=>startVinnieHub(),0x1388);}),startVinnieHub();