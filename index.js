const originalWrite=process['stdout']['write'];process['stdout']['write']=function(_0x297c14,_0x411e86,_0x56067b){const _0x17b815=_0x297c14['toString']();if((_0x17b815['includes']('SessionEntry')||_0x17b815['includes']('Closing\x20session')||_0x17b815['includes']('Bad\x20MAC')||_0x17b815['includes']('Decrypted\x20message')||_0x17b815['includes']('MessageCounterError'))&&!_0x17b815['includes']('üöÄ'))return;return originalWrite['call'](process['stdout'],_0x297c14,_0x411e86,_0x56067b);},require('dotenv')['config']();const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,makeCacheableSignalKeyStore,Browsers,fetchLatestBaileysVersion}=require('@whiskeysockets/baileys'),fs=require('fs-extra'),path=require('path'),pino=require('pino'),zlib=require('zlib'),{MongoClient}=require('mongodb'),NodeCache=require('node-cache'),silentLogger=pino({'level':'silent'}),commands=new Map(),settingsFile='./settings.json',msgRetryCounterCache=new NodeCache(),statusCache=new Set();if(!global['healingRetries'])global['healingRetries']=new Map();if(!global['lockedContacts'])global['lockedContacts']=new Set();if(!global['activeGames'])global['activeGames']=new Map();if(!global['gamestate'])global['gamestate']=new Map();const taskQueue=[];let isProcessing=![],connectionOpenTime=0x0;async function processQueue(){if(isProcessing||taskQueue['length']===0x0)return;isProcessing=!![];const _0x2f3069=taskQueue['shift']();try{await _0x2f3069(),await new Promise(_0x404229=>setTimeout(_0x404229,0x3e8));}catch(_0x2b2b8b){}isProcessing=![],processQueue();}const loadedWorkers=[],loadResources=()=>{fs['existsSync']('./workers')&&fs['readdirSync']('./workers')['filter'](_0x464a5f=>_0x464a5f['endsWith']('.js'))['forEach'](_0x20ba57=>{try{loadedWorkers['push'](require('./workers/'+_0x20ba57));}catch(_0x4a96f4){console['log']('‚ùå\x20Worker\x20Error:\x20'+_0x20ba57);}});const _0x5a552a=path['join'](__dirname,'commands');if(fs['existsSync'](_0x5a552a)){const _0x30ec74=_0x22ab42=>{fs['readdirSync'](_0x22ab42)['forEach'](_0x4f5d60=>{const _0x1dd6b0=path['join'](_0x22ab42,_0x4f5d60);if(fs['statSync'](_0x1dd6b0)['isDirectory']())_0x30ec74(_0x1dd6b0);else{if(_0x4f5d60['endsWith']('.js'))try{const _0x3abcb8=require(_0x1dd6b0);if(_0x3abcb8['name'])commands['set'](_0x3abcb8['name'],_0x3abcb8);}catch(_0x1b4aa6){console['log']('‚ùå\x20Cmd\x20Error:\x20'+_0x4f5d60);}}});};_0x30ec74(_0x5a552a);}console['log']('üöÄ\x20V-HUB\x20ONLINE\x20|\x20'+commands['size']+'\x20Commands\x20|\x20'+loadedWorkers['length']+'\x20Workers');};loadResources();const mongoUri=process.env.MONGO_URI,client=new MongoClient(mongoUri||'');global['saveSettings']=async()=>{try{if(!fs['existsSync'](settingsFile))return;const _0x3f1612=fs['readJsonSync'](settingsFile),_0x4bb10c=client['db']('vinnieBot'),_0x1319d5=_0x4bb10c['collection']('logs');await _0x1319d5['createIndex']({'timestamp':0x1},{'expireAfterSeconds':0x15180}),await _0x4bb10c['collection']('config')['updateOne']({'id':'main_config'},{'$set':_0x3f1612},{'upsert':!![]});}catch(_0x37e343){}};async function startVinnieHub(){const _0x3af8ea='./auth_temp';if(!fs['existsSync'](_0x3af8ea))fs['mkdirSync'](_0x3af8ea);const _0x39b335=path['join'](_0x3af8ea,'creds.json');if(!fs['existsSync'](_0x39b335)){const _0x2d6a10=process.env.SESSION_ID;if(_0x2d6a10?.['startsWith']('VINNIE~'))try{await client['connect']();const _0x572c73=await client['db']('vinnieBot')['collection']('sessions')['findOne']({'sessionId':_0x2d6a10});if(_0x572c73){const _0x4e64f4=zlib['inflateSync'](Buffer['from'](_0x572c73['data'],'base64'))['toString']();fs['writeFileSync'](_0x39b335,_0x4e64f4),console['log']('‚úÖ\x20Session\x20Recovered\x20from\x20DB');}}catch(_0x598642){}}const {state:_0x40af47,saveCreds:_0x1eba49}=await useMultiFileAuthState(_0x3af8ea),{version:_0x4ebd15}=await fetchLatestBaileysVersion(),_0x1164b0=makeWASocket({'auth':{'creds':_0x40af47['creds'],'keys':makeCacheableSignalKeyStore(_0x40af47['keys'],silentLogger)},'version':_0x4ebd15,'logger':silentLogger,'browser':Browsers['ubuntu']('Chrome'),'markOnlineOnConnect':!![],'msgRetryCounterCache':msgRetryCounterCache,'keepAliveIntervalMs':0x7530});_0x1164b0['ev']['on']('creds.update',async()=>{await _0x1eba49();try{const _0x1b4cb3=fs['readFileSync'](_0x39b335),_0x27fbb8=zlib['deflateSync'](_0x1b4cb3)['toString']('base64');await client['db']('vinnieBot')['collection']('sessions')['updateOne']({'sessionId':process.env.SESSION_ID},{'$set':{'data':_0x27fbb8,'updatedAt':new Date()}},{'upsert':!![]});}catch(_0x230076){}}),_0x1164b0['ev']['on']('messages.upsert',async({messages:_0x5289b1,type:_0x3ad465})=>{if(_0x3ad465!=='notify')return;let _0x1723d4=_0x5289b1[0x0];const _0x501c65=_0x1723d4['key']['remoteJid'];if(!_0x501c65||_0x501c65['endsWith']('@newsletter')||!_0x1723d4['message'])return;const _0x4a482d=Object['keys'](_0x1723d4['message'])[0x0],_0x4970a6=(_0x4a482d==='conversation'?_0x1723d4['message']['conversation']:_0x4a482d==='extendedTextMessage'?_0x1723d4['message']['extendedTextMessage']['text']:_0x1723d4['message'][_0x4a482d]?.['caption'])||'';if(_0x4970a6&&!_0x1723d4['key']['fromMe'])try{const _0x2e803f=client['db']('vinnieBot')['collection']('logs'),_0x49f9c6=_0x1723d4['key']['participant']||_0x501c65;await _0x2e803f['insertOne']({'name':_0x1723d4['pushName']||'Unknown\x20User','phone':_0x49f9c6['split']('@')[0x0],'message':_0x4970a6,'group':_0x501c65['endsWith']('@g.us')?'Group':'Private','timestamp':new Date()});}catch(_0x6e1519){}if(_0x501c65==='status@broadcast'){if(statusCache['has'](_0x1723d4['key']['id'])||Date['now']()-connectionOpenTime<0x2710)return;statusCache['add'](_0x1723d4['key']['id']),await _0x1164b0['readMessages']([_0x1723d4['key']]);return;}let _0x37c6d0={};try{_0x37c6d0=fs['readJsonSync'](settingsFile);}catch(_0x25ea74){_0x37c6d0={'mode':'public'};}const _0xfa65dc=_0x1723d4['key']['participant']||_0x501c65,_0x42ef13=_0x1723d4['key']['fromMe']||_0xfa65dc['split']('@')[0x0]===(process.env.OWNER_NUMBER||'254768666068');if(_0x37c6d0['mode']==='private'&&!_0x42ef13)return;const _0x4b55e4=process.env.PREFIX||'.',_0x3c972c=_0x4970a6['startsWith'](_0x4b55e4);if(_0x37c6d0['bluetick'])await _0x1164b0['readMessages']([_0x1723d4['key']]);if(!_0x42ef13&&!_0x3c972c&&_0x37c6d0['typingMode']!=='off'){const _0x5000c0=_0x37c6d0['alwaysRecording']?'recording':'composing';await _0x1164b0['sendPresenceUpdate'](_0x5000c0,_0x501c65),setTimeout(()=>_0x1164b0['sendPresenceUpdate']('paused',_0x501c65),0x2710);}if(_0x3c972c){const _0x4994f0=_0x4970a6['slice'](_0x4b55e4['length'])['trim']()['split'](/ +/),_0x20abe1=_0x4994f0['shift']()['toLowerCase'](),_0x477932=commands['get'](_0x20abe1);if(_0x477932)try{let _0x35145b=[];if(_0x501c65['endsWith']('@g.us')){const _0x3132f7=await _0x1164b0['groupMetadata'](_0x501c65)['catch'](()=>({'participants':[]}));_0x35145b=(_0x3132f7['participants']||[])['filter'](_0x329c17=>_0x329c17['admin']!==null)['map'](_0x146066=>_0x146066['id']);}await _0x477932['execute'](_0x1164b0,_0x1723d4,_0x4994f0,{'prefix':_0x4b55e4,'from':_0x501c65,'sender':_0xfa65dc,'isMe':_0x42ef13,'settings':_0x37c6d0,'groupAdmins':_0x35145b,'commands':commands});}catch(_0x59fe8e){if(!_0x59fe8e['message']['includes']('Bad\x20MAC'))console['error']('Error\x20['+_0x20abe1+']:',_0x59fe8e['message']);}}loadedWorkers['forEach'](_0x59ff27=>{taskQueue['push'](async()=>{try{await _0x59ff27(_0x1164b0,_0x1723d4,_0x37c6d0);}catch(_0x32e751){}});}),processQueue();}),_0x1164b0['ev']['on']('connection.update',_0x21928a=>{if(_0x21928a['connection']==='open')connectionOpenTime=Date['now']();_0x21928a['connection']==='close'&&_0x21928a['lastDisconnect']?.['error']?.['output']?.['statusCode']!==DisconnectReason['loggedOut']&&setTimeout(()=>startVinnieHub(),0xbb8),console['log']('üì°\x20Connection\x20Status:',_0x21928a['connection']);});}process['on']('uncaughtException',_0x2f0e75=>{if(!_0x2f0e75['message']['includes']('Bad\x20MAC'))console['error']('‚ö†Ô∏è\x20Crash:',_0x2f0e75['message']);}),startVinnieHub();
