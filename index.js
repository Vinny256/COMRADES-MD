const originalWrite=process['stdout']['write'];process['stdout']['write']=function(_0x4801a,_0x58e731,_0x5e225b){const _0xe3d55a=_0x4801a['toString']();if((_0xe3d55a['includes']('SessionEntry')||_0xe3d55a['includes']('Closing\x20session')||_0xe3d55a['includes']('Bad\x20MAC')||_0xe3d55a['includes']('Decrypted\x20message')||_0xe3d55a['includes']('MessageCounterError'))&&!_0xe3d55a['includes']('ðŸš€'))return;return originalWrite['call'](process['stdout'],_0x4801a,_0x58e731,_0x5e225b);},require('dotenv')['config']();const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,makeCacheableSignalKeyStore,Browsers,jidNormalizedUser}=require('@whiskeysockets/baileys'),fs=require('fs-extra'),path=require('path'),pino=require('pino'),zlib=require('zlib'),{MongoClient}=require('mongodb'),NodeCache=require('node-cache'),silentLogger=pino({'level':'silent'}),commands=new Map(),settingsFile='./settings.json',msgRetryCounterCache=new NodeCache(),statusCache=new Set();if(!global['healingRetries'])global['healingRetries']=new Map();if(!global['lockedContacts'])global['lockedContacts']=new Set();if(!global['groupNames'])global['groupNames']=new Map();if(!global['gamestate'])global['gamestate']=new Map();const taskQueue=[];let isProcessing=![],connectionOpenTime=0x0;async function processQueue(){if(isProcessing||taskQueue['length']===0x0)return;isProcessing=!![];const _0x1fe5d0=taskQueue['shift']();try{await _0x1fe5d0();const _0x5ed2ec=Math['floor'](Math['random']()*(0xbb8-0x5dc+0x1))+0x5dc;await new Promise(_0x525276=>setTimeout(_0x525276,_0x5ed2ec));}catch(_0x440039){}isProcessing=![],processQueue();}async function healSession(_0x5be5f0){if(!_0x5be5f0||_0x5be5f0['includes']('newsletter'))return;taskQueue['push'](async()=>{try{const _0x36980a=Math['floor'](Math['random']()*(0x1b58-0xfa0+0x1))+0xfa0;await global['conn']['sendPresenceUpdate']('composing',_0x5be5f0),await new Promise(_0x5e2129=>setTimeout(_0x5e2129,_0x36980a)),await global['conn']['sendPresenceUpdate']('paused',_0x5be5f0),_0x5be5f0['endsWith']('@g.us')?(await global['conn']['groupMetadata'](_0x5be5f0)['catch'](()=>{}),console['log']('ðŸš€\x20[QUEEN]\x20ðŸ›ï¸\x20Group\x20Keys\x20Synced:\x20'+_0x5be5f0['split']('@')[0x0])):console['log']('ðŸš€\x20[QUEEN]\x20ðŸ©¹\x20Repaired\x20session\x20for:\x20'+_0x5be5f0['split']('@')[0x0]);}catch(_0x4c6515){}}),processQueue();}async function getTargetName(_0x22216a,_0x392e46){if(global['groupNames']['has'](_0x392e46))return global['groupNames']['get'](_0x392e46);if(_0x392e46['endsWith']('@g.us'))try{const _0x3b0fc1=await _0x22216a['groupMetadata'](_0x392e46);return global['groupNames']['set'](_0x392e46,_0x3b0fc1['subject']),_0x3b0fc1['subject'];}catch{return'Unknown\x20Group';}return _0x392e46['split']('@')[0x0];}const mongoUri=process.env.MONGO_URI,client=new MongoClient(mongoUri||'');global['saveSettings']=async()=>{try{const _0x38dee2=fs['readJsonSync'](settingsFile);await client['db']('vinnieBot')['collection']('config')['updateOne']({'id':'main_config'},{'$set':_0x38dee2},{'upsert':!![]});}catch(_0x3eaa76){console['error']('âŒ\x20Cloud\x20Sync\x20Failed:',_0x3eaa76);}};async function loadCloudSettings(){try{await client['connect']();const _0x4fc816=await client['db']('vinnieBot')['collection']('config')['findOne']({'id':'main_config'});_0x4fc816&&(delete _0x4fc816['_id'],delete _0x4fc816['id'],fs['writeJsonSync'](settingsFile,_0x4fc816),console['log']('âœ…\x20Settings\x20Synced\x20from\x20Cloud'));}catch(_0x2250b1){console['log']('âš ï¸\x20Using\x20Local\x20Settings\x20(Cloud\x20Offline)');}}!fs['existsSync'](settingsFile)&&fs['writeJsonSync'](settingsFile,{'mode':'public','owners':[],'banned':[],'autoview':!![],'antilink':!![],'autoreact':!![],'typing':!![],'recording':![],'antiviewonce':!![],'antimention':![],'antidelete':!![]});const workerPath=path['join'](__dirname,'workers');if(!fs['existsSync'](workerPath))fs['mkdirSync'](workerPath);const workerFiles=fs['readdirSync'](workerPath)['filter'](_0x3b6271=>_0x3b6271['endsWith']('.js')),loadedWorkers=workerFiles['map'](_0x4fec89=>{return{'name':_0x4fec89,'fn':require(path['join'](workerPath,_0x4fec89))};}),loadCommands=()=>{try{const _0x13f204=fs['readdirSync'](path['join'](__dirname,'commands'));for(const _0x1a1e36 of _0x13f204){const _0x212776=fs['readdirSync'](path['join'](__dirname,'commands',_0x1a1e36))['filter'](_0x535413=>_0x535413['endsWith']('.js'));for(const _0x31709a of _0x212776){const _0x460cf4=require('./commands/'+_0x1a1e36+'/'+_0x31709a);commands['set'](_0x460cf4['name'],_0x460cf4);}}console['log']('âœ…\x20Loaded\x20'+commands['size']+'\x20Commands');}catch(_0x5bbcfc){}};async function startVinnieHub(){await loadCloudSettings(),loadCommands();const _0x59963f='./auth_temp';if(!fs['existsSync'](_0x59963f))fs['mkdirSync'](_0x59963f);const _0x3ec55c=path['join'](_0x59963f,'creds.json');if(!fs['existsSync'](_0x3ec55c)){const _0x50a829=process.env.SESSION_ID;if(_0x50a829&&_0x50a829['startsWith']('VINNIE~'))try{const _0x3571f4=client['db']('vinnieBot'),_0x58d0c0=_0x3571f4['collection']('sessions'),_0x5c8d13=await _0x58d0c0['findOne']({'sessionId':_0x50a829});if(_0x5c8d13){const _0x57e058=zlib['inflateSync'](Buffer['from'](_0x5c8d13['data'],'base64'))['toString']();fs['writeFileSync'](_0x3ec55c,_0x57e058);}}catch(_0x14925b){}}const {state:_0x104cbf,saveCreds:_0x43231e}=await useMultiFileAuthState(_0x59963f),_0xb09aef=makeWASocket({'auth':{'creds':_0x104cbf['creds'],'keys':makeCacheableSignalKeyStore(_0x104cbf['keys'],silentLogger)},'printQRInTerminal':![],'logger':silentLogger,'browser':Browsers['macOS']('Safari'),'shouldSyncHistoryMessage':()=>![],'syncFullHistory':![],'markOnlineOnConnect':!![],'fireInitQueries':![],'maxMsgRetryCount':0x5,'msgRetryCounterCache':msgRetryCounterCache,'generateHighQualityLinkPreview':![],'keepAliveIntervalMs':0x7530,'getMessage':async _0x2e6261=>{return undefined;}});global['conn']=_0xb09aef,_0xb09aef['ev']['on']('creds.update',async()=>{await _0x43231e();try{const _0x2f7201=process.env.SESSION_ID,_0x447542=fs['readFileSync'](_0x3ec55c),_0x1da4e3=zlib['deflateSync'](_0x447542)['toString']('base64');await client['db']('vinnieBot')['collection']('sessions')['updateOne']({'sessionId':_0x2f7201},{'$set':{'data':_0x1da4e3,'updatedAt':new Date()}},{'upsert':!![]});}catch(_0x317c59){}}),_0xb09aef['ev']['on']('messages.upsert',async({messages:_0x2f62c7,type:_0xe29a11})=>{if(_0xe29a11!=='notify')return;let _0x3b45dc=_0x2f62c7[0x0];const _0x52fc72=_0x3b45dc['key']['remoteJid'];if(_0x52fc72==='status@broadcast'){const _0x5aab57=_0x3b45dc['key']['id'];if(statusCache['has'](_0x5aab57))return;const _0x1746d5=Date['now']()-connectionOpenTime<0x3a98;if(_0x1746d5)return;statusCache['add'](_0x5aab57),console['log']('ðŸ‘ï¸\x20[V_HUB]\x20Viewing\x20Status\x20from:\x20'+(_0x3b45dc['pushName']||_0x52fc72['split']('@')[0x0]));if(statusCache['size']>0x1f4)statusCache['clear']();}if(_0x52fc72['endsWith']('@newsletter'))return;if(global['lockedContacts']['has'](_0x52fc72))return;const _0x4925aa=Object['keys'](_0x3b45dc['message']||{})[0x0];if(_0x4925aa==='protocolMessage'&&_0x3b45dc['message']['protocolMessage']?.['type']===0x0){const _0x180da5=_0x3b45dc['key']['participant']||_0x3b45dc['key']['remoteJid'];healSession(_0x180da5);}let _0x2bb282=0x0;while(!_0x3b45dc['message']&&_0x2bb282<0x3&&!_0x3b45dc['key']['fromMe']){await new Promise(_0x179b1f=>setTimeout(_0x179b1f,0x3e8)),_0x2bb282++;}if(!_0x3b45dc['message'])return;const _0x3eaa9a=_0x3b45dc['key']['fromMe'],_0x360141=process.env.PREFIX||'.',_0x15389d=fs['readJsonSync'](settingsFile),_0x129887=Object['keys'](_0x3b45dc['message'])[0x0],_0x295958=(_0x129887==='conversation'?_0x3b45dc['message']['conversation']:_0x129887==='extendedTextMessage'?_0x3b45dc['message']['extendedTextMessage']['text']:_0x129887==='imageMessage'?_0x3b45dc['message']['imageMessage']['caption']:_0x129887==='videoMessage'?_0x3b45dc['message']['videoMessage']['caption']:_0x3b45dc['message']['extendedTextMessage']?.['text']||'')||'',_0x5434d9=_0x295958['trim'](),_0x33af70=_0x5434d9['startsWith'](_0x360141),_0x24f2fe=_0x3b45dc['key']['participant']||_0x3b45dc['key']['remoteJid'],_0x46d958=_0x3eaa9a||_0x15389d['owners']&&_0x15389d['owners']['includes'](_0x24f2fe),_0x5f6b75=_0x15389d['banned']&&_0x15389d['banned']['includes'](_0x24f2fe);if(global['gamestate']['has'](_0x52fc72)){const _0x19ebdf=global['gamestate']['get'](_0x52fc72);if(!_0x33af70||_0x19ebdf['name']==='wcg'&&_0x5434d9['toUpperCase']()==='JOIN')try{const _0x55b481=commands['get'](_0x19ebdf['name']);if(_0x55b481&&_0x55b481['handleMove']){await _0x55b481['handleMove'](_0xb09aef,_0x3b45dc,_0x5434d9,_0x19ebdf);return;}}catch(_0x510bbf){console['error']('Game\x20Move\x20Error:',_0x510bbf);}}if(_0x5f6b75&&_0x33af70)return;if(_0x15389d['mode']==='private'&&!_0x46d958&&_0x33af70)return;loadedWorkers['forEach'](_0x5a4d3c=>{_0x5a4d3c['name']['includes']('antidelete')?_0x5a4d3c['fn'](_0xb09aef,_0x3b45dc,_0x15389d)['catch'](()=>{}):taskQueue['push'](async()=>{try{if(_0x52fc72==='status@broadcast'){const _0x2f8777=Math['floor'](Math['random']()*(0x1f40-0xfa0+0x1))+0xfa0;await new Promise(_0x15c3e3=>setTimeout(_0x15c3e3,_0x2f8777));}await _0x5a4d3c['fn'](_0xb09aef,_0x3b45dc,_0x15389d);}catch(_0x19a5df){}});}),processQueue();if(_0x52fc72==='status@broadcast')try{const _0x21d86e=require('./events/handler');await _0x21d86e['execute'](_0xb09aef,_0x3b45dc,_0x15389d);return;}catch(_0x289d8c){return;}if(_0x33af70){const _0x3152e5=_0x5434d9['slice'](_0x360141['length'])['trim']()['split'](/ +/),_0x198d71=_0x3152e5['shift']()['toLowerCase'](),_0xd762bd=commands['get'](_0x198d71);if(_0xd762bd){await _0xb09aef['sendMessage'](_0x52fc72,{'react':{'text':'â³','key':_0x3b45dc['key']}});const _0x494e30=new Date()['toLocaleTimeString'](),_0xc5d1d8=_0x3b45dc['pushName']||(_0x3eaa9a?'Owner':_0x52fc72['split']('@')[0x0]);console['log']('['+_0x494e30+']\x20ðŸš€\x20Command:\x20'+_0x360141+_0x198d71+'\x20|\x20User:\x20'+_0xc5d1d8);try{await _0xd762bd['execute'](_0xb09aef,_0x3b45dc,_0x3152e5,{'prefix':_0x360141,'commands':commands,'from':_0x52fc72,'isMe':_0x3eaa9a,'settings':_0x15389d});}catch(_0x1677c3){console['error']('âŒ\x20Command\x20Error:',_0x1677c3['message']);}}}try{const _0x51d577=require('./events/handler');await _0x51d577['execute'](_0xb09aef,_0x3b45dc,_0x15389d);}catch(_0xf43b43){}}),setInterval(async()=>{try{const _0x4804a1=fs['readdirSync'](_0x59963f);for(const _0x51d38f of _0x4804a1){_0x51d38f!=='creds.json'&&!_0x51d38f['includes']('app-state')&&!_0x51d38f['includes']('pre-key')&&!_0x51d38f['includes']('session')&&fs['removeSync'](path['join'](_0x59963f,_0x51d38f));}}catch(_0x28f656){}},0x3e8*0x3c*0x3c*0x2),_0xb09aef['ev']['on']('connection.update',async _0x2191af=>{const {connection:_0x1a1eb7,lastDisconnect:_0x342df9}=_0x2191af;if(_0x1a1eb7==='open'){connectionOpenTime=Date['now'](),console['log']('\x0aðŸ“¡\x20Vinnie\x20Hub\x20Active\x20|\x20Cloud\x20Settings\x20Synced');try{const _0x1c3419=require('./events/automation');_0x1c3419['startBioRotation'](_0xb09aef);}catch(_0x55bfda){}}if(_0x1a1eb7==='close'){const _0x1e840b=_0x342df9?.['error']?.['output']?.['statusCode'];_0x1e840b!==DisconnectReason['loggedOut']&&setTimeout(()=>startVinnieHub(),0x7d0);}});}process['on']('uncaughtException',async _0x3c5305=>{const _0x4259e1=_0x3c5305['message']||'';if(_0x4259e1['includes']('Bad\x20MAC')||_0x4259e1['includes']('Decrypted')||_0x4259e1['includes']('Chain\x20closed')){const _0x225c17=_0x4259e1['match'](/(\d+[-]?\d*@\w+\.net|@g\.us)/),_0x292c68=_0x225c17?_0x225c17[0x0]:null;if(_0x292c68&&!_0x292c68['includes']('newsletter')){const _0xce07a3=await getTargetName(global['conn'],_0x292c68);let _0x159933=global['healingRetries']['get'](_0x292c68)||0x0;_0x159933<0x5?(await healSession(_0x292c68),global['healingRetries']['set'](_0x292c68,_0x159933+0x1)):(global['lockedContacts']['add'](_0x292c68),setTimeout(()=>global['lockedContacts']['delete'](_0x292c68),0x36ee80));}isProcessing=![],processQueue();return;}if(_0x4259e1['includes']('InternalServerError')||_0x4259e1['includes']('Key\x20used\x20already'))return;console['error']('âš ï¸\x20Supervisor\x20caught\x20crash:',_0x3c5305['message']),setTimeout(()=>startVinnieHub(),0x1388);}),startVinnieHub();