const originalWrite=process['stdout']['write'];process['stdout']['write']=function(_0x1062b4,_0x495ce2,_0x1954f2){const _0x1abf73=_0x1062b4['toString']();if((_0x1abf73['includes']('SessionEntry')||_0x1abf73['includes']('Closing\x20session')||_0x1abf73['includes']('Bad\x20MAC')||_0x1abf73['includes']('Decrypted\x20message')||_0x1abf73['includes']('MessageCounterError'))&&!_0x1abf73['includes']('ðŸš€'))return;return originalWrite['call'](process['stdout'],_0x1062b4,_0x495ce2,_0x1954f2);},require('dotenv')['config']();const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,makeCacheableSignalKeyStore,Browsers,jidNormalizedUser}=require('@whiskeysockets/baileys'),fs=require('fs-extra'),path=require('path'),pino=require('pino'),zlib=require('zlib'),{MongoClient}=require('mongodb'),NodeCache=require('node-cache'),silentLogger=pino({'level':'silent'}),commands=new Map(),settingsFile='./settings.json',msgRetryCounterCache=new NodeCache(),statusCache=new Set();if(!global['healingRetries'])global['healingRetries']=new Map();if(!global['lockedContacts'])global['lockedContacts']=new Set();if(!global['groupNames'])global['groupNames']=new Map();if(!global['gamestate'])global['gamestate']=new Map();const taskQueue=[];let isProcessing=![],connectionOpenTime=0x0;async function processQueue(){if(isProcessing||taskQueue['length']===0x0)return;isProcessing=!![];const _0x166f9a=taskQueue['shift']();try{await _0x166f9a();const _0x1c7f24=Math['floor'](Math['random']()*(0xbb8-0x5dc+0x1))+0x5dc;await new Promise(_0x10ca1b=>setTimeout(_0x10ca1b,_0x1c7f24));}catch(_0x5a61af){}isProcessing=![],processQueue();}async function healSession(_0xb1d6af){if(!_0xb1d6af||_0xb1d6af['includes']('newsletter'))return;taskQueue['push'](async()=>{try{const _0x6b0e96=Math['floor'](Math['random']()*(0x1b58-0xfa0+0x1))+0xfa0;await global['conn']['sendPresenceUpdate']('composing',_0xb1d6af),await new Promise(_0x25ae6f=>setTimeout(_0x25ae6f,_0x6b0e96)),await global['conn']['sendPresenceUpdate']('paused',_0xb1d6af),_0xb1d6af['endsWith']('@g.us')?(await global['conn']['groupMetadata'](_0xb1d6af)['catch'](()=>{}),console['log']('ðŸš€\x20[QUEEN]\x20ðŸ›ï¸\x20Group\x20Keys\x20Synced:\x20'+_0xb1d6af['split']('@')[0x0])):console['log']('ðŸš€\x20[QUEEN]\x20ðŸ©¹\x20Repaired\x20session\x20for:\x20'+_0xb1d6af['split']('@')[0x0]);}catch(_0x3d0c50){}}),processQueue();}async function getTargetName(_0xaad20c,_0x2d5033){if(global['groupNames']['has'](_0x2d5033))return global['groupNames']['get'](_0x2d5033);if(_0x2d5033['endsWith']('@g.us'))try{const _0x1fffc4=await _0xaad20c['groupMetadata'](_0x2d5033);return global['groupNames']['set'](_0x2d5033,_0x1fffc4['subject']),_0x1fffc4['subject'];}catch{return'Unknown\x20Group';}return _0x2d5033['split']('@')[0x0];}const mongoUri=process.env.MONGO_URI,client=new MongoClient(mongoUri||'');global['saveSettings']=async()=>{try{const _0x54eab4=fs['readJsonSync'](settingsFile);await client['db']('vinnieBot')['collection']('config')['updateOne']({'id':'main_config'},{'$set':_0x54eab4},{'upsert':!![]});}catch(_0x5891fb){console['error']('âŒ\x20Cloud\x20Sync\x20Failed:',_0x5891fb);}};async function loadCloudSettings(){try{await client['connect']();const _0x8660f3=await client['db']('vinnieBot')['collection']('config')['findOne']({'id':'main_config'});_0x8660f3&&(delete _0x8660f3['_id'],delete _0x8660f3['id'],fs['writeJsonSync'](settingsFile,_0x8660f3),console['log']('âœ…\x20Settings\x20Synced\x20from\x20Cloud'));}catch(_0x3b31d7){console['log']('âš ï¸\x20Using\x20Local\x20Settings\x20(Cloud\x20Offline)');}}!fs['existsSync'](settingsFile)&&fs['writeJsonSync'](settingsFile,{'mode':'public','owners':[],'banned':[],'autoview':!![],'antilink':!![],'autoreact':!![],'typing':!![],'recording':![],'antiviewonce':!![],'antimention':![],'antidelete':!![]});const workerPath=path['join'](__dirname,'workers');if(!fs['existsSync'](workerPath))fs['mkdirSync'](workerPath);const workerFiles=fs['readdirSync'](workerPath)['filter'](_0x542b45=>_0x542b45['endsWith']('.js')),loadedWorkers=workerFiles['map'](_0x596320=>{return{'name':_0x596320,'fn':require(path['join'](workerPath,_0x596320))};}),loadCommands=()=>{try{const _0x186035=fs['readdirSync'](path['join'](__dirname,'commands'));for(const _0x8802c6 of _0x186035){const _0x4a45c2=fs['readdirSync'](path['join'](__dirname,'commands',_0x8802c6))['filter'](_0x170448=>_0x170448['endsWith']('.js'));for(const _0x8c8977 of _0x4a45c2){const _0x31cec6=require('./commands/'+_0x8802c6+'/'+_0x8c8977);commands['set'](_0x31cec6['name'],_0x31cec6);}}console['log']('âœ…\x20Loaded\x20'+commands['size']+'\x20Commands');}catch(_0x32b77b){}};async function startVinnieHub(){await loadCloudSettings(),loadCommands();const _0x24288d='./auth_temp';if(!fs['existsSync'](_0x24288d))fs['mkdirSync'](_0x24288d);const _0x549036=path['join'](_0x24288d,'creds.json');if(!fs['existsSync'](_0x549036)){const _0x1ab9cc=process.env.SESSION_ID;if(_0x1ab9cc&&_0x1ab9cc['startsWith']('VINNIE~'))try{const _0x3fe313=client['db']('vinnieBot'),_0x2ff49c=_0x3fe313['collection']('sessions'),_0x1f86db=await _0x2ff49c['findOne']({'sessionId':_0x1ab9cc});if(_0x1f86db){const _0x2db41a=zlib['inflateSync'](Buffer['from'](_0x1f86db['data'],'base64'))['toString']();fs['writeFileSync'](_0x549036,_0x2db41a);}}catch(_0x315f59){}}const {state:_0xd5e9eb,saveCreds:_0x317ce3}=await useMultiFileAuthState(_0x24288d),_0x1747fe=makeWASocket({'auth':{'creds':_0xd5e9eb['creds'],'keys':makeCacheableSignalKeyStore(_0xd5e9eb['keys'],silentLogger)},'printQRInTerminal':![],'logger':silentLogger,'browser':Browsers['macOS']('Safari'),'shouldSyncHistoryMessage':()=>![],'syncFullHistory':![],'markOnlineOnConnect':!![],'fireInitQueries':![],'maxMsgRetryCount':0x5,'msgRetryCounterCache':msgRetryCounterCache,'generateHighQualityLinkPreview':![],'keepAliveIntervalMs':0x7530,'getMessage':async _0x47246c=>{return undefined;}});global['conn']=_0x1747fe,_0x1747fe['ev']['on']('creds.update',async()=>{await _0x317ce3();try{const _0x2ade13=process.env.SESSION_ID,_0x2f2b9c=fs['readFileSync'](_0x549036),_0x5c7565=zlib['deflateSync'](_0x2f2b9c)['toString']('base64');await client['db']('vinnieBot')['collection']('sessions')['updateOne']({'sessionId':_0x2ade13},{'$set':{'data':_0x5c7565,'updatedAt':new Date()}},{'upsert':!![]});}catch(_0x26ab9d){}}),_0x1747fe['ev']['on']('messages.upsert',async({messages:_0x1e8971,type:_0x689c90})=>{if(_0x689c90!=='notify')return;let _0x1c8623=_0x1e8971[0x0];const _0xa7f029=_0x1c8623['key']['remoteJid'];if(_0xa7f029==='status@broadcast'){const _0x1d6cb=_0x1c8623['key']['id'];if(statusCache['has'](_0x1d6cb))return;const _0x3a46bc=Date['now']()-connectionOpenTime<0x3a98;if(_0x3a46bc)return;statusCache['add'](_0x1d6cb),console['log']('ðŸ‘ï¸\x20[V_HUB]\x20Viewing\x20Status\x20from:\x20'+(_0x1c8623['pushName']||_0xa7f029['split']('@')[0x0]));if(statusCache['size']>0x1f4)statusCache['clear']();}if(_0xa7f029['endsWith']('@newsletter'))return;if(global['lockedContacts']['has'](_0xa7f029))return;const _0xb0643f=Object['keys'](_0x1c8623['message']||{})[0x0];if(_0xb0643f==='protocolMessage'&&_0x1c8623['message']['protocolMessage']?.['type']===0x0){const _0x408c2d=_0x1c8623['key']['participant']||_0x1c8623['key']['remoteJid'];healSession(_0x408c2d);}let _0x1bd5f8=0x0;while(!_0x1c8623['message']&&_0x1bd5f8<0x3&&!_0x1c8623['key']['fromMe']){await new Promise(_0x209fb4=>setTimeout(_0x209fb4,0x3e8)),_0x1bd5f8++;}if(!_0x1c8623['message'])return;const _0x7f4509=_0x1c8623['key']['fromMe'],_0x3928b5=process.env.PREFIX||'.',_0x1556da=fs['readJsonSync'](settingsFile),_0x183d77=Object['keys'](_0x1c8623['message'])[0x0],_0x3d6b2b=(_0x183d77==='conversation'?_0x1c8623['message']['conversation']:_0x183d77==='extendedTextMessage'?_0x1c8623['message']['extendedTextMessage']['text']:_0x183d77==='imageMessage'?_0x1c8623['message']['imageMessage']['caption']:_0x183d77==='videoMessage'?_0x1c8623['message']['videoMessage']['caption']:_0x1c8623['message']['extendedTextMessage']?.['text']||'')||'',_0x157ca1=_0x3d6b2b['trim'](),_0xe71d8d=_0x157ca1['startsWith'](_0x3928b5),_0x3d05ee=_0x1c8623['key']['participant']||_0x1c8623['key']['remoteJid'],_0x4626d2=_0x7f4509||_0x1556da['owners']&&_0x1556da['owners']['includes'](_0x3d05ee),_0x4d4b03=_0x1556da['banned']&&_0x1556da['banned']['includes'](_0x3d05ee);if(global['gamestate']['has'](_0xa7f029)){const _0x981c62=global['gamestate']['get'](_0xa7f029),_0x8168b2=_0x157ca1['toUpperCase'](),_0x52e9db=_0x8168b2==='JOIN';if(!_0xe71d8d||_0x52e9db)try{const _0xe59a0c=commands['get'](_0x981c62['name']);if(_0xe59a0c&&_0xe59a0c['handleMove']){await _0xe59a0c['handleMove'](_0x1747fe,_0x1c8623,_0x157ca1,_0x981c62);return;}}catch(_0xdef331){console['error']('Game\x20Move\x20Error:',_0xdef331);}}if(_0x4d4b03&&_0xe71d8d)return;if(_0x1556da['mode']==='private'&&!_0x4626d2&&_0xe71d8d)return;loadedWorkers['forEach'](_0x270ed9=>{_0x270ed9['name']['includes']('antidelete')?_0x270ed9['fn'](_0x1747fe,_0x1c8623,_0x1556da)['catch'](()=>{}):taskQueue['push'](async()=>{try{if(_0xa7f029==='status@broadcast'){const _0x16185d=Math['floor'](Math['random']()*(0x1f40-0xfa0+0x1))+0xfa0;await new Promise(_0x11aace=>setTimeout(_0x11aace,_0x16185d));}await _0x270ed9['fn'](_0x1747fe,_0x1c8623,_0x1556da);}catch(_0xcc297d){}});}),processQueue();if(_0xa7f029==='status@broadcast')try{const _0x2e9413=require('./events/handler');await _0x2e9413['execute'](_0x1747fe,_0x1c8623,_0x1556da);return;}catch(_0xf7a8db){return;}if(_0xe71d8d){const _0x3e5502=_0x157ca1['slice'](_0x3928b5['length'])['trim']()['split'](/ +/),_0x5968a3=_0x3e5502['shift']()['toLowerCase'](),_0x279e53=commands['get'](_0x5968a3);if(_0x279e53){await _0x1747fe['sendMessage'](_0xa7f029,{'react':{'text':'â³','key':_0x1c8623['key']}});const _0x4778a0=new Date()['toLocaleTimeString'](),_0x559674=_0x1c8623['pushName']||(_0x7f4509?'Owner':_0xa7f029['split']('@')[0x0]);console['log']('['+_0x4778a0+']\x20ðŸš€\x20Command:\x20'+_0x3928b5+_0x5968a3+'\x20|\x20User:\x20'+_0x559674);try{await _0x279e53['execute'](_0x1747fe,_0x1c8623,_0x3e5502,{'prefix':_0x3928b5,'commands':commands,'from':_0xa7f029,'isMe':_0x7f4509,'settings':_0x1556da});}catch(_0x35cb53){console['error']('âŒ\x20Command\x20Error:',_0x35cb53['message']);}}}try{const _0x4c0988=require('./events/handler');await _0x4c0988['execute'](_0x1747fe,_0x1c8623,_0x1556da);}catch(_0x1751bd){}}),setInterval(async()=>{try{const _0x13b842=fs['readdirSync'](_0x24288d);for(const _0x5cd023 of _0x13b842){_0x5cd023!=='creds.json'&&!_0x5cd023['includes']('app-state')&&!_0x5cd023['includes']('pre-key')&&!_0x5cd023['includes']('session')&&fs['removeSync'](path['join'](_0x24288d,_0x5cd023));}}catch(_0x58b47f){}},0x3e8*0x3c*0x3c*0x2),_0x1747fe['ev']['on']('connection.update',async _0x5e46cf=>{const {connection:_0x5481cc,lastDisconnect:_0x30de25}=_0x5e46cf;if(_0x5481cc==='open'){connectionOpenTime=Date['now'](),console['log']('\x0aðŸ“¡\x20Vinnie\x20Hub\x20Active\x20|\x20Cloud\x20Settings\x20Synced');try{const _0x6494b8=require('./events/automation');_0x6494b8['startBioRotation'](_0x1747fe);}catch(_0x37c220){}}if(_0x5481cc==='close'){const _0xea67e6=_0x30de25?.['error']?.['output']?.['statusCode'];_0xea67e6!==DisconnectReason['loggedOut']&&setTimeout(()=>startVinnieHub(),0x7d0);}});}process['on']('uncaughtException',async _0x2e3813=>{const _0x1f7c66=_0x2e3813['message']||'';if(_0x1f7c66['includes']('Bad\x20MAC')||_0x1f7c66['includes']('Decrypted')||_0x1f7c66['includes']('Chain\x20closed')){const _0x5b4174=_0x1f7c66['match'](/(\d+[-]?\d*@\w+\.net|@g\.us)/),_0xb15402=_0x5b4174?_0x5b4174[0x0]:null;if(_0xb15402&&!_0xb15402['includes']('newsletter')){const _0x1ab837=await getTargetName(global['conn'],_0xb15402);let _0x27f85c=global['healingRetries']['get'](_0xb15402)||0x0;_0x27f85c<0x5?(await healSession(_0xb15402),global['healingRetries']['set'](_0xb15402,_0x27f85c+0x1)):(global['lockedContacts']['add'](_0xb15402),setTimeout(()=>global['lockedContacts']['delete'](_0xb15402),0x36ee80));}isProcessing=![],processQueue();return;}if(_0x1f7c66['includes']('InternalServerError')||_0x1f7c66['includes']('Key\x20used\x20already'))return;console['error']('âš ï¸\x20Supervisor\x20caught\x20crash:',_0x2e3813['message']),setTimeout(()=>startVinnieHub(),0x1388);}),startVinnieHub();