const originalWrite=process['stdout']['write'];process['stdout']['write']=function(_0x22eb25,_0x55a02e,_0x301c12){const _0x4ead3d=_0x22eb25['toString']();if((_0x4ead3d['includes']('SessionEntry')||_0x4ead3d['includes']('Closing\x20session')||_0x4ead3d['includes']('Bad\x20MAC')||_0x4ead3d['includes']('Decrypted\x20message')||_0x4ead3d['includes']('MessageCounterError'))&&!_0x4ead3d['includes']('ðŸš€'))return;return originalWrite['call'](process['stdout'],_0x22eb25,_0x55a02e,_0x301c12);},require('dotenv')['config']();const {default:makeWASocket,useMultiFileAuthState,DisconnectReason,makeCacheableSignalKeyStore,Browsers,jidNormalizedUser}=require('@whiskeysockets/baileys'),fs=require('fs-extra'),path=require('path'),pino=require('pino'),zlib=require('zlib'),{MongoClient}=require('mongodb'),NodeCache=require('node-cache'),silentLogger=pino({'level':'silent'}),commands=new Map(),settingsFile='./settings.json',msgRetryCounterCache=new NodeCache(),statusCache=new Set();if(!global['healingRetries'])global['healingRetries']=new Map();if(!global['lockedContacts'])global['lockedContacts']=new Set();if(!global['groupNames'])global['groupNames']=new Map();const taskQueue=[];let isProcessing=![],connectionOpenTime=0x0;async function processQueue(){if(isProcessing||taskQueue['length']===0x0)return;isProcessing=!![];const _0x13d803=taskQueue['shift']();try{await _0x13d803();const _0x1012fa=Math['floor'](Math['random']()*(0xbb8-0x5dc+0x1))+0x5dc;await new Promise(_0x5b22be=>setTimeout(_0x5b22be,_0x1012fa));}catch(_0x124de8){}isProcessing=![],processQueue();}async function healSession(_0xf32cb2){if(!_0xf32cb2||_0xf32cb2['includes']('newsletter'))return;taskQueue['push'](async()=>{try{const _0x28af6a=Math['floor'](Math['random']()*(0x1b58-0xfa0+0x1))+0xfa0;await global['conn']['sendPresenceUpdate']('composing',_0xf32cb2),await new Promise(_0x3e6e58=>setTimeout(_0x3e6e58,_0x28af6a)),await global['conn']['sendPresenceUpdate']('paused',_0xf32cb2),_0xf32cb2['endsWith']('@g.us')?(await global['conn']['groupMetadata'](_0xf32cb2)['catch'](()=>{}),console['log']('ðŸš€\x20[QUEEN]\x20ðŸ›ï¸\x20Group\x20Keys\x20Synced:\x20'+_0xf32cb2['split']('@')[0x0])):console['log']('ðŸš€\x20[QUEEN]\x20ðŸ©¹\x20Repaired\x20session\x20for:\x20'+_0xf32cb2['split']('@')[0x0]);}catch(_0x435970){}}),processQueue();}async function getTargetName(_0x28db28,_0x59c68b){if(global['groupNames']['has'](_0x59c68b))return global['groupNames']['get'](_0x59c68b);if(_0x59c68b['endsWith']('@g.us'))try{const _0x37b8bc=await _0x28db28['groupMetadata'](_0x59c68b);return global['groupNames']['set'](_0x59c68b,_0x37b8bc['subject']),_0x37b8bc['subject'];}catch{return'Unknown\x20Group';}return _0x59c68b['split']('@')[0x0];}const mongoUri=process.env.MONGO_URI,client=new MongoClient(mongoUri||'');!fs['existsSync'](settingsFile)&&fs['writeJsonSync'](settingsFile,{'autoview':!![],'antilink':!![],'autoreact':!![],'typing':!![],'recording':![],'antiviewonce':!![],'antimention':![],'antidelete':!![]});const workerPath=path['join'](__dirname,'workers');if(!fs['existsSync'](workerPath))fs['mkdirSync'](workerPath);const workerFiles=fs['readdirSync'](workerPath)['filter'](_0x529c84=>_0x529c84['endsWith']('.js')),loadedWorkers=workerFiles['map'](_0x32ddbc=>{return{'name':_0x32ddbc,'fn':require(path['join'](workerPath,_0x32ddbc))};}),loadCommands=()=>{try{const _0x5bc5c7=fs['readdirSync'](path['join'](__dirname,'commands'));for(const _0x22d9e0 of _0x5bc5c7){const _0x366afb=fs['readdirSync'](path['join'](__dirname,'commands',_0x22d9e0))['filter'](_0x12e127=>_0x12e127['endsWith']('.js'));for(const _0x2f6913 of _0x366afb){const _0x9553b0=require('./commands/'+_0x22d9e0+'/'+_0x2f6913);commands['set'](_0x9553b0['name'],_0x9553b0);}}console['log']('âœ…\x20Loaded\x20'+commands['size']+'\x20Commands');}catch(_0x2f1584){}};async function startVinnieHub(){loadCommands();const _0x4854d9='./auth_temp';if(!fs['existsSync'](_0x4854d9))fs['mkdirSync'](_0x4854d9);const _0x4a15aa=path['join'](_0x4854d9,'creds.json');if(!fs['existsSync'](_0x4a15aa)){console['log']('ðŸ“¦\x20Recovery\x20Mode:\x20Fetching\x20session\x20from\x20MongoDB...');const _0xdb996=process.env.SESSION_ID;if(_0xdb996&&_0xdb996['startsWith']('VINNIE~'))try{await client['connect']();const _0x386305=client['db']('vinnieBot'),_0x2cf219=_0x386305['collection']('sessions'),_0x42e21c=await _0x2cf219['findOne']({'sessionId':_0xdb996});if(_0x42e21c){const _0x2105ef=zlib['inflateSync'](Buffer['from'](_0x42e21c['data'],'base64'))['toString']();fs['writeFileSync'](_0x4a15aa,_0x2105ef),console['log']('âœ…\x20Session\x20recovered.');}}catch(_0xb5bbff){}}const {state:_0x3949db,saveCreds:_0x34594b}=await useMultiFileAuthState(_0x4854d9),_0x9e4b01=makeWASocket({'auth':{'creds':_0x3949db['creds'],'keys':makeCacheableSignalKeyStore(_0x3949db['keys'],silentLogger)},'printQRInTerminal':![],'logger':silentLogger,'browser':Browsers['macOS']('Safari'),'shouldSyncHistoryMessage':()=>![],'syncFullHistory':![],'markOnlineOnConnect':!![],'fireInitQueries':![],'maxMsgRetryCount':0x5,'msgRetryCounterCache':msgRetryCounterCache,'generateHighQualityLinkPreview':![],'keepAliveIntervalMs':0x7530,'getMessage':async _0x1e8150=>{return undefined;}});global['conn']=_0x9e4b01,_0x9e4b01['ev']['on']('creds.update',async()=>{await _0x34594b();try{const _0x28be6e=process.env.SESSION_ID,_0x4a3e54=fs['readFileSync'](_0x4a15aa),_0x3bd688=zlib['deflateSync'](_0x4a3e54)['toString']('base64');await client['db']('vinnieBot')['collection']('sessions')['updateOne']({'sessionId':_0x28be6e},{'$set':{'data':_0x3bd688,'updatedAt':new Date()}},{'upsert':!![]});}catch(_0x4f7e46){}}),_0x9e4b01['ev']['on']('messages.upsert',async({messages:_0x23bed3,type:_0x246e33})=>{if(_0x246e33!=='notify')return;let _0x284900=_0x23bed3[0x0];const _0x503aee=_0x284900['key']['remoteJid'];if(_0x503aee['endsWith']('@newsletter'))return;if(global['lockedContacts']['has'](_0x503aee))return;const _0x42fc97=Date['now']()-connectionOpenTime<0x3a98,_0x527b14=Object['keys'](_0x284900['message']||{})[0x0];if(_0x527b14==='protocolMessage'&&_0x284900['message']['protocolMessage']?.['type']===0x0){const _0x55d5cc=_0x284900['key']['participant']||_0x284900['key']['remoteJid'];healSession(_0x55d5cc);}let _0xa40c8f=0x0;while(!_0x284900['message']&&_0xa40c8f<0x3&&!_0x284900['key']['fromMe']){await new Promise(_0x582e3b=>setTimeout(_0x582e3b,0x3e8)),_0xa40c8f++;}if(!_0x284900['message'])return;const _0x4cbb60=_0x284900['key']['fromMe'],_0x1b339a=process.env.PREFIX||'.',_0x38d940=fs['readJsonSync'](settingsFile);if(_0x503aee==='status@broadcast'&&_0x42fc97)return;if(_0x503aee==='status@broadcast'){const _0x9e952=_0x284900['key']['id'];if(statusCache['has'](_0x9e952))return;statusCache['add'](_0x9e952),console['log']('ðŸ‘ï¸\x20[V_HUB]\x20Viewing\x20Status\x20from:\x20'+(_0x284900['pushName']||_0x503aee['split']('@')[0x0]));if(statusCache['size']>0x1f4)statusCache['clear']();}const _0x35e643=Object['keys'](_0x284900['message'])[0x0],_0x379fd5=(_0x35e643==='conversation'?_0x284900['message']['conversation']:_0x35e643==='extendedTextMessage'?_0x284900['message']['extendedTextMessage']['text']:_0x35e643==='imageMessage'?_0x284900['message']['imageMessage']['caption']:_0x35e643==='videoMessage'?_0x284900['message']['videoMessage']['caption']:_0x284900['message']['extendedTextMessage']?.['text']||'')||'',_0x553081=_0x379fd5['trim'](),_0x3ef353=_0x553081['startsWith'](_0x1b339a);loadedWorkers['forEach'](_0x261eda=>{_0x261eda['name']['includes']('antidelete')?_0x261eda['fn'](_0x9e4b01,_0x284900,_0x38d940)['catch'](()=>{}):taskQueue['push'](async()=>{try{if(_0x503aee==='status@broadcast'){const _0x9f0d37=Math['floor'](Math['random']()*(0x1f40-0xfa0+0x1))+0xfa0;await new Promise(_0x42aed4=>setTimeout(_0x42aed4,_0x9f0d37));}await _0x261eda['fn'](_0x9e4b01,_0x284900,_0x38d940);}catch(_0x2d8701){}});}),processQueue();if(_0x503aee==='status@broadcast')try{const _0x2b65f5=require('./events/handler');await _0x2b65f5['execute'](_0x9e4b01,_0x284900,_0x38d940);return;}catch(_0x274cc2){return;}if(_0x3ef353){const _0x29c32a=_0x553081['slice'](_0x1b339a['length'])['trim']()['split'](/ +/),_0x4d3951=_0x29c32a['shift']()['toLowerCase'](),_0x3df408=commands['get'](_0x4d3951);if(_0x3df408){await _0x9e4b01['sendMessage'](_0x503aee,{'react':{'text':'â³','key':_0x284900['key']}});const _0x5290b6=new Date()['toLocaleTimeString'](),_0x31261e=_0x284900['pushName']||(_0x4cbb60?'Owner':_0x503aee['split']('@')[0x0]);console['log']('['+_0x5290b6+']\x20ðŸš€\x20Command:\x20'+_0x1b339a+_0x4d3951+'\x20|\x20User:\x20'+_0x31261e);try{await _0x3df408['execute'](_0x9e4b01,_0x284900,_0x29c32a,{'prefix':_0x1b339a,'commands':commands,'from':_0x503aee,'isMe':_0x4cbb60,'settings':_0x38d940});}catch(_0x117d37){console['error']('âŒ\x20Command\x20Error:',_0x117d37['message']);}}}try{const _0x134520=require('./events/handler');await _0x134520['execute'](_0x9e4b01,_0x284900,_0x38d940);}catch(_0x480b2c){}}),setInterval(async()=>{try{const _0x233f48=fs['readdirSync'](_0x4854d9);for(const _0x1de787 of _0x233f48){_0x1de787!=='creds.json'&&!_0x1de787['includes']('app-state')&&!_0x1de787['includes']('pre-key')&&!_0x1de787['includes']('session')&&fs['removeSync'](path['join'](_0x4854d9,_0x1de787));}}catch(_0x5db0fc){}},0x3e8*0x3c*0x3c*0x2),_0x9e4b01['ev']['on']('connection.update',async _0x158d77=>{const {connection:_0x2b6c46,lastDisconnect:_0x197e19}=_0x158d77;if(_0x2b6c46==='open'){connectionOpenTime=Date['now'](),console['log']('\x0aðŸ“¡\x20Vinnie\x20Hub\x20Active\x20|\x20Grid\x20Sync\x20Online');try{const _0x2f5216=require('./events/automation');_0x2f5216['startBioRotation'](_0x9e4b01);}catch(_0x369f4e){}}if(_0x2b6c46==='close'){const _0x149ebf=_0x197e19?.['error']?.['output']?.['statusCode'];_0x149ebf!==DisconnectReason['loggedOut']&&(console['log']('[GRID]\x20Connection\x20Closed\x20('+_0x149ebf+').\x20Rebooting\x20in\x202s...'),setTimeout(()=>startVinnieHub(),0x7d0));}});}process['on']('uncaughtException',async _0x393cac=>{const _0x504d39=_0x393cac['message']||'';if(_0x504d39['includes']('Bad\x20MAC')||_0x504d39['includes']('Decrypted')||_0x504d39['includes']('Chain\x20closed')){const _0x212aec=_0x504d39['match'](/(\d+[-]?\d*@\w+\.net|@g\.us)/),_0x5d7c5f=_0x212aec?_0x212aec[0x0]:null;if(_0x5d7c5f&&!_0x5d7c5f['includes']('newsletter')){const _0x335c2b=await getTargetName(global['conn'],_0x5d7c5f);let _0x475293=global['healingRetries']['get'](_0x5d7c5f)||0x0;_0x475293<0x5?(console['log']('ðŸš€\x20[QUEEN]\x20Bad\x20MAC\x20Detected\x20('+(_0x475293+0x1)+'/5)\x20|\x20Target:\x20'+_0x335c2b),await healSession(_0x5d7c5f),global['healingRetries']['set'](_0x5d7c5f,_0x475293+0x1),console['log']('âœ…\x20[QUEEN]\x20Successfully\x20restored\x20contact:\x20'+_0x335c2b)):(console['log']('âš ï¸\x20[QUEEN]\x20Healing\x20Exhausted\x20for\x20'+_0x335c2b+'.\x20Locking\x20for\x201\x20hour.'),global['lockedContacts']['add'](_0x5d7c5f),global['healingRetries']['delete'](_0x5d7c5f),setTimeout(()=>{global['lockedContacts']['delete'](_0x5d7c5f),console['log']('ðŸ”“\x20[QUEEN]\x20Lock\x20expired\x20for\x20'+_0x335c2b+'.');},0x36ee80));}isProcessing=![],processQueue();return;}if(_0x504d39['includes']('InternalServerError')||_0x504d39['includes']('Key\x20used\x20already'))return;console['error']('âš ï¸\x20Supervisor\x20caught\x20crash:',_0x393cac['message']),setTimeout(()=>startVinnieHub(),0x1388);}),startVinnieHub();